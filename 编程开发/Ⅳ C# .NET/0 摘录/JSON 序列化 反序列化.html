<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>JSON 序列化 反序列化</title><?xml version="1.0" encoding="UTF-8"?>


<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">数据传输是个很大的概念。我不是从理论的角度去记录随笔，只是把互联传输中的概念简化到消息的位面。以便于对分布传输中的消息进行一下剖析，加深印象。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">对处于脱机状态下的终端来说，数据的传输可以通过中间介质进行中介传输。但在联机情况下，可以不必通过第三方的介入，仅用的就是其中的数据线。这个概念很容易理解：</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">1&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">一块干电池，两根导线，一个直流电灯泡。电池和灯泡可以看做是脱机情况下的两个终端，而电流就是数据。当两者相连，电灯泡就能亮（一切状态假设成立）。两者相连就能有电流通过，这个原理是懂的。因为电压的原因，电流会有一个完整的回路。（更深的不探讨）。这里互联的两上终端如果要有电流的传输，那么至少两个必要的因素：数据线和电压。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">2&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">在农村浇灌庄稼地。主要的步骤是：拉电闸，抽水机把地下水抽上来，然后由垄沟把水导到地里进行灌溉。这里也是有必要的因素：水泵叫水，因为水压的原因使水向前流，有通到地里的垄沟。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">联机中的终端要进行数据传输要有一些必要的条件，例如其中的通道，使数据进行传输的动力等等。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">协议是什么？</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">（引百度知道）在计算机范畴内：计算机通信网是由许多具有信息交换和处理能力的节点互连而成的，要使整个网络有条不紊地工作，就要求每个节点必须遵守一些事先约定好的有关数据格式及时序等的规则。</span><span style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">这些为实现网络数据交换而建立的规则、约定或标准就称为网络协议。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">协议是通信双方为了实现通信而设计的约定或通话规则。</span></strong></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">协议总是指某一层的协议。准确地说，它是在同等层之间的实体通信时，有关通信规则和约定的集合就是该层协议，例如物理层协议、传输层协议、应用层协议。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">其实从字面上，我们都能理解所谓的协议是什么，这种意义对计算机通信而言也是有意义的。平常所熟知的协议有</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">Http</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">，</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">Tcp/Ip</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">，</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">UDP</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">等。协议是要对通信双方都有效的约定，而双方也都要符合这种约定，不管是软件环境还是硬件环境。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">数据传输</span></strong></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">计算机通信为的就是数据传输，但数据有所有同，从物理上都是二进制或者说最终在物理介质上都是二进制。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">在局域网内，文件共享，打印机共享是最常见的。广域网中，电子邮件，实时通信，网页预览，资源下载，</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">Ftp</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">上传等。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">它们的终端都要遵守共同的约定。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">如果现在</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">A</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">和</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">B</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">要进行数据传输，例如</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">A</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">要把自己的客户名单传输到</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">B</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">上，</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">那么能过</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">Http</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">协议：</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">B</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">架设网站服务器来发布</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">Html</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">，</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">A</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">通过</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">http</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">来访问</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">B</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">网站上的客户名单导入页，然后导入自己的客户名单并提交，数据通过</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">Http</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">协议</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">Post</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">或</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">Get</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">方式把数据传送到</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">B</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">，</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">B</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">在收到数据后进行存储</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">在</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">Tcp/Ip</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">协议下：</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">B</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">建立套接字监听地址和端口，</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">A</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">与</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">B</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">建立连接，然后向</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">B</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">传递数据，</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">B</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">收到数据后进行存储。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">而</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">http</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">协议中传输的是</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">http</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">协议包，包中包含着传递的数据，</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">tcp</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">协议中传输的</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">tcp</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">包，可能只是一个字符串。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">（</span></strong><strong style="margin: 0px; padding: 0px;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">1</span></strong><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">）通过</span></strong><strong style="margin: 0px; padding: 0px;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">Socket</span></strong><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">传递字符串</span></strong></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">服务端：</span></strong></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">static</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">void</span>&nbsp;Main(<span style="margin: 0px; padding: 0px; color: blue;">string</span>[] args)</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">{</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>&nbsp;address =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>.Parse(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;192.168.1.98&quot;</span>);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>&nbsp;_address =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>(address, 65000);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">Socket</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;socket =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Socket</span>(<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">AddressFamily</span>.InterNetwork,</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">SocketType</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">.Stream,&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">ProtocolType</span>.Tcp);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Bind(_address);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Listen(20);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">byte</span>[] bb=<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">byte</span>[255];</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">while</span>&nbsp;(<span style="margin: 0px; padding: 0px; color: blue;">true</span>)</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>{</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">Socket</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;ss = socket.Accept();</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">ss.Receive(bb);</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">Console</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">.WriteLine(<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Encoding</span>.UTF8.GetString(bb));</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">客户端：</span></strong></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">public</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">void</span>&nbsp;TestSocket()</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">{</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>&nbsp;address =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>.Parse(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;192.168.1.98&quot;</span>);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>&nbsp;_address =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>(address,65000);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">Socket</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;socket =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Socket</span>(<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">AddressFamily</span>.InterNetwork,</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">SocketType</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">.Stream,&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">ProtocolType</span>.Tcp);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Connect(_address);<span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;</span></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">string</span>&nbsp;strMessage =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;test123&quot;</span>;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">byte</span>[] bb =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Encoding</span>.UTF8.GetBytes(strMessage);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Send(bb);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;</span></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Console</span>.WriteLine(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Sent: {0}&quot;</span>, strMessage);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">这里传递的是最简单的字符串。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">在两端进行图片传递也可以参考消息（</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">1</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">）中的内容来实现。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">（</span></strong><strong style="margin: 0px; padding: 0px;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">2</span></strong><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">）传递客户信息</span></strong></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">对于传递客户信息，这里的方法就是转换为字串，转换为可解析的字串，例如</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">json</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">。这里通过</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">json.net</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">这个第三方</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">json</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">序列化和反序列化工具来实现对客户信息的序列化及反序列化。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">服务端：</span></strong></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">IPAddress</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;address =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>.Parse(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;127.0.0.1&quot;</span>);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">IPEndPoint</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;_address =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>(address, 65000);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">Socket</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;socket =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Socket</span>(<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">AddressFamily</span>.InterNetwork,</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">SocketType</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">.Stream,&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">ProtocolType</span>.Tcp);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">socket.Bind(_address);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">socket.Listen(20);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">byte</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">[] bb=<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">byte</span>[350];</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">while</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;(<span style="margin: 0px; padding: 0px; color: blue;">true</span>)</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">{</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Socket</span>&nbsp;ss = socket.Accept();</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>ss.Receive(bb);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Customer</span>&nbsp;customer =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Customer</span>();</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">MemoryStream</span>&nbsp;ms=<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">MemoryStream</span>();</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>ms.Read(bb,0,bb.Length);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">string</span>&nbsp;strJson =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Encoding</span>.Default.GetString(bb);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">char</span>&nbsp;c =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&#39;\0&#39;</span>;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">var</span>&nbsp;p =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">from</span>&nbsp;q&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">in</span>&nbsp;strJson&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">where</span>&nbsp;q != c&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">select</span>&nbsp;q;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">char</span>[] chs = p.ToArray&lt;<span style="margin: 0px; padding: 0px; color: blue;">char</span>&gt;();</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>strJson =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">string</span>(chs);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">try</span></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>{</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>customer=<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">JsonConvert</span>.DeserializeObject&lt;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Customer</span>&gt;(strJson);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">catch</span></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>{ }</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>ms.Close();</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Console</span>.WriteLine(customer.Unid);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">其中对</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">json.net</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">的更多内容可见官网我的博客上的几篇随笔：</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;"><a href="http://james.newtonking.com/projects/json-net.aspx" style="margin: 0px; padding: 0px; color: rgb(68, 68, 68);" target="_blank">http://james.newtonking.com/projects/json-net.aspx</a></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;"><a href="http://www.cnblogs.com/jams742003/archive/2010/03/03/1677288.html" style="margin: 0px; padding: 0px; color: rgb(68, 68, 68);" target="_blank">http://www.cnblogs.com/jams742003/archive/2010/03/03/1677288.html</a></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">在客户端：</span></strong></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">public</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">void</span>&nbsp;TestCustomer()</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">{</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Customer</span>&nbsp;customer =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Customer</span></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>{</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">Unid = 13,</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">CustomerName =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Songjiang&quot;</span>,</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">CreateTime =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">DateTime</span>.Now,</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">Telephone =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Call</span></span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">{ Mobile =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;1111111&quot;</span>, FirmCall =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;2222&quot;</span>, HomeCall =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;3333&quot;</span>&nbsp;}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>};</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: green; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">string</span>&nbsp;strJson =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">JsonConvert</span>.SerializeObject(customer);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">byte</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">[] bb =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Encoding</span>.Default.GetBytes(strJson);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>&nbsp;address =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>.Parse(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;127.0.0.1&quot;</span>);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>&nbsp;_address =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>(address, 65000);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">Socket</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;socket =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Socket</span>(<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">AddressFamily</span>.InterNetwork,</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">SocketType</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">.Stream,&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">ProtocolType</span>.Tcp);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Connect(_address);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Send(bb);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Console</span>.WriteLine(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;</span></span><span style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(163, 21, 21); font-family: 宋体;">发送完毕</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(163, 21, 21); font-family: Consolas;">&quot;</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Close();</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">因为这个客户类的原因，使得在服务端和客户端都有有这个类。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">在传递简单信息的时候，能很方便的传递，因为它们都是做为基元类型存在，但对于复杂类型，例如类类型，则要对两端都要有这个类。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">在这个例子中，</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">socket</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">传递的包是带有一个</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">json</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">大串的字符串。通过抓包的工具，拿下这个包的内容是：</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">{&quot;Unid&quot;: 13,&quot;CustomerName &quot;:&quot;Songjiang&quot;,&quot;CreateTime&quot;:&quot;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">\/Date(1269998944484 +0800)\/&quot;,&quot;Telephone&quot;:</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">{&quot;HomeCall &quot;:&quot;3333&quot;,&quot;Mobile&nbsp;&quot;:&quot;1111111&quot;,</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&quot;FirmCall&quot;:&quot;2222&quot;}}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">现在有这么一种情况，在</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">.net</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">环境下这个数据传递是可以实现，但如果用到别的环境还能这样吗？</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">其实对于这个例子，它是可以的，因为</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">json</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">也是一种数据交换格式，是一种轻量级的。同时，可以利于机器的生成和解析。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">还有一种格式就是</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">xml</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">格式，通过它也可以进行数据交换。这边是一个对客户信息进行</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">xml</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">化进行传输。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">客户端：</span></strong></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">public</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">void</span>&nbsp;TestCustomerXml()</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">{</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Customer</span>&nbsp;customer =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Customer</span></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>{</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">Unid = 13,</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">CustomerName =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Songjiang&quot;</span>,</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">CreateTime =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">DateTime</span>.Now,</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">Telephone =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Call</span>&nbsp;{</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">Mobile =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;1111111&quot;</span>,</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">FirmCall =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;2222&quot;</span>,</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">HomeCall =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;3333&quot;</span>&nbsp;}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>};</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: green;">//</span></span><span style="margin: 0px; padding: 0px; font-size: 9pt; color: green; font-family: 宋体;">创建</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: green; font-family: Consolas;">xml</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XDocument</span>&nbsp;doc =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XDocument</span>();</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>doc.Add(<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Customers&quot;</span>));</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>doc.Element(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Customers&quot;</span>).Add(<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Customer&quot;</span>));</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>doc.Element(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Customers&quot;</span>).Element(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Customer&quot;</span>).Add(</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">new</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Unid&quot;</span>,customer.Unid),</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">new</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;CustomerName&quot;</span>,customer.CustomerName),</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">new</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;CreateTime&quot;</span>,customer.CreateTime),</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">new</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Telephone&quot;</span>)</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">doc.Element(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Customers&quot;</span>).Element(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Customer&quot;</span>).Element(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Telephone&quot;</span>).</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">Add(</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">new</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Mobile&quot;</span>,customer.Telephone.Mobile),</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">new</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;FirmCall&quot;</span>,customer.Telephone.FirmCall),</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">new</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;HomeCall&quot;</span>,customer.Telephone.HomeCall)</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;</span></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">string</span>&nbsp;strXml = doc.ToString();</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">byte</span>[] bb =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Encoding</span>.Default.GetBytes(strXml);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>&nbsp;address =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>.Parse(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;192.168.1.105&quot;</span>);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>&nbsp;_address =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>(address, 65000);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">Socket</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;socket =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Socket</span>(<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">AddressFamily</span>.InterNetwork,</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 19.5pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">SocketType</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">.Stream,&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">ProtocolType</span>.Tcp);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Connect(_address);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Send(bb);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Console</span>.WriteLine(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;</span></span><span style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(163, 21, 21); font-family: 宋体;">发送完毕</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(163, 21, 21); font-family: Consolas;">&quot;</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Close();</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">客户端创建一个描述客户数据的</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">xml</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">文档，然后向服务器提交。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><strong style="margin: 0px; padding: 0px;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">服务端：</span></strong></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">static</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">void</span>&nbsp;Main(<span style="margin: 0px; padding: 0px; color: blue;">string</span>[] args)</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">{</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>&nbsp;address =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPAddress</span>.Parse(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;192.168.1.105&quot;</span>);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>&nbsp;_address =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">IPEndPoint</span>(address, 65000);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Socket</span>&nbsp;socket =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Socket</span>(<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">AddressFamily</span>.InterNetwork,&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">SocketType</span>.Stream,&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">ProtocolType</span>.Tcp);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Bind(_address);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>socket.Listen(20);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">byte</span>[] bb =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">byte</span>[350];</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px; color: blue;">while</span>&nbsp;(<span style="margin: 0px; padding: 0px; color: blue;">true</span>)</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>{</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">Socket</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;ss = socket.Accept();</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">ss.Receive(bb);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">Customer</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;customer =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Customer</span>();</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">MemoryStream</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;ms =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">MemoryStream</span>();</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">ms.Read(bb, 0, bb.Length);</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">string</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;strXml =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Encoding</span>.Default.GetString(bb);</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">char</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;c =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&#39;\0&#39;</span>;</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">var</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;p1 =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">from</span>&nbsp;q&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">in</span>&nbsp;strXml&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">where</span>&nbsp;q != c&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">select</span>&nbsp;q;</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">char</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">[] chs = p1.ToArray&lt;<span style="margin: 0px; padding: 0px; color: blue;">char</span>&gt;();</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">strXml =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">string</span>(chs);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">XDocument</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;doc=<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XDocument</span>.Parse(strXml);</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: blue; font-family: Consolas;">var</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;p =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">from</span>&nbsp;q&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">in</span>&nbsp;doc.Element(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Customers&quot;</span>).Element(<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Customer&quot;</span>).Elements()&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">select</span>&nbsp;q;<span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">&nbsp;</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">customer =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Customer</span></span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">{</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">Unid =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Convert</span>.ToInt32(</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">p.Where(x =&gt; x.Name ==&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Unid&quot;</span>).First&lt;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>&gt;().Value),</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>CustomerName = (p.Where(x =&gt; x.Name ==&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;CustomerName&quot;</span>).</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">First&lt;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>&gt;().Value).ToString(),</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>CreateTime =&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Convert</span>.ToDateTime(p.</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">Where(x =&gt; x.Name ==&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;CreateTime&quot;</span>).</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">First&lt;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>&gt;().Value),</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>Telephone =&nbsp;<span style="margin: 0px; padding: 0px; color: blue;">new</span>&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">Call</span>&nbsp;{</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">Mobile = p.Where(y =&gt; y.Name ==&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Telephone&quot;</span>).</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">First&lt;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>&gt;().Elements().Where(x =&gt; x.Name ==&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Mobile&quot;</span>).</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">First&lt;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>&gt;().Value,</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">FirmCall = p.Where(y =&gt; y.Name ==&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Telephone&quot;</span>).</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">First&lt;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>&gt;().Elements().Where(x =&gt; x.Name ==&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;FirmCall&quot;</span>).</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">First&lt;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>&gt;().Value,</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">HomeCall = p.Where(y =&gt; y.Name ==&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;Telephone&quot;</span>).</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">First&lt;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>&gt;().Elements().Where(x =&gt; x.Name ==&nbsp;<span style="margin: 0px; padding: 0px; color: rgb(163, 21, 21);">&quot;HomeCall&quot;</span>).</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">First&lt;<span style="margin: 0px; padding: 0px; color: rgb(43, 145, 175);">XElement</span>&gt;().Value</span></p><p align="left" style="margin: 0cm 0cm 0pt 42pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">}</span></p><p align="left" style="margin: 0cm 0cm 0pt 21pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">};</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;</span><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;</span></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;</span></span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">ms.Close();</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; text-indent: 21pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; color: rgb(43, 145, 175); font-family: Consolas;">Console</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">.WriteLine(customer.Unid);</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;"><span style="margin: 0px; padding: 0px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span lang="EN-US" style="margin: 0px; padding: 0px; font-size: 9pt; font-family: Consolas;">}</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">服务端接收到</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">xml</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">后进行解析，分离数据。</span></p><p align="left" style="margin: 0cm 0cm 0pt; padding: 0px; font-size: 13px; line-height: 20pt; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; background-color: rgb(255, 255, 255); text-align: left;"><span style="margin: 0px; padding: 0px; font-family: 宋体;">服务端与客户端都以</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">xml</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">格式进行数据的解析和生成，</span><span lang="EN-US" style="margin: 0px; padding: 0px; font-family: Consolas;">xml</span><span style="margin: 0px; padding: 0px; font-family: 宋体;">就是他们共同的约定。</span></p></div>