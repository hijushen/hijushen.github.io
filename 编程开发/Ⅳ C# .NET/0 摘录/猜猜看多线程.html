<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>猜猜看多线程</title><?xml version="1.0" encoding="UTF-8"?>


<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">
1，使用多线程需要引入System.Threading.<img hash="22aa3198eef3cf756b10d75f55085fbe" style="cursor: default;cursor: default;" type="image/png" src="猜猜看多线程_files/22aa3198eef3cf756b10d75f55085fbe.png" /><div>源码：<span style="color: rgb(0, 128, 0); font-weight: bold;">using</span>&nbsp;System;</div><span style="color: #008000; font-weight: bold;">using</span>&nbsp;System.Collections.Generic;<br/><span style="color: #008000; font-weight: bold;">using</span>&nbsp;System.ComponentModel;<br/><span style="color: #008000; font-weight: bold;">using</span>&nbsp;System.Data;<br/><span style="color: #008000; font-weight: bold;">using</span>&nbsp;System.Drawing;<br/><span style="color: #008000; font-weight: bold;">using</span>&nbsp;System.Linq;<br/><span style="color: #008000; font-weight: bold;">using</span>&nbsp;System.Text;<br/><span style="color: #008000; font-weight: bold;">using</span>&nbsp;System.Windows.Forms;<br/><br/><span style="color: #008000; font-weight: bold;">namespace</span>&nbsp;NumGame<br/>
{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">public</span>&nbsp;<span style="color: #000080;">partial</span>&nbsp;<span style="color: #ff0000;">class</span>&nbsp;Frm_Main : Form<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">public</span>&nbsp;<span style="color: #191970; font-weight: bold;">Frm_Main</span>()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #191970; font-weight: bold;">InitializeComponent</span>();<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.Threading.Thread G_th;<span style="color: #008000;">//定义线程</span><br/><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Random G_random =&nbsp;<span style="color: #008b8b; font-weight: bold;">new</span>&nbsp;<span style="color: #191970; font-weight: bold;">Random</span>();<span style="color: #008000;">//定义随机数对象</span><br/><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000; font-weight: bold;">int</span>&nbsp;G_int_num;<span style="color: #008000;">//定义变量用于存放存机数</span><br/><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">private</span>&nbsp;<span style="color: #ff0000;">void</span>&nbsp;<span style="color: #191970; font-weight: bold;">btn_begin_Click</span>(<span style="color: #ff0000;">object</span>&nbsp;sender,&nbsp;EventArgs e)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #191970; font-weight: bold;">RemoveControl</span>();<span style="color: #008000;">//清空所有无用对象</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000; font-weight: bold;">int</span>&nbsp;p_int_x =&nbsp;<span style="color: #00008b;">10</span>;<span style="color: #008000;">//X坐标初始值为10</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000; font-weight: bold;">int</span>&nbsp;p_int_y =&nbsp;<span style="color: #00008b;">60</span>;<span style="color: #008000;">//Y坐标初始值为60</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">for</span>&nbsp;(<span style="color: #ff0000; font-weight: bold;">int</span>&nbsp;i =&nbsp;<span style="color: #00008b;">0</span>;&nbsp;i&nbsp;&lt;&nbsp;<span style="color: #00008b;">100</span>;&nbsp;i++)<span style="color: #008000;">//添加100个按钮</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Button bt =&nbsp;<span style="color: #008b8b; font-weight: bold;">new</span>&nbsp;<span style="color: #191970; font-weight: bold;">Button</span>();<span style="color: #008000;">//创建button按钮</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bt.Text =&nbsp;(i&nbsp;+&nbsp;<span style="color: #00008b;">1</span>).<span style="color: #191970; font-weight: bold;">ToString</span>();<span style="color: #008000;">//设置button按钮的文本值</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bt.Name =&nbsp;(i&nbsp;+&nbsp;<span style="color: #00008b;">1</span>).<span style="color: #191970; font-weight: bold;">ToString</span>();<span style="color: #008000;">//设置button按钮的Name属性</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bt.Width =&nbsp;<span style="color: #00008b;">35</span>;<span style="color: #008000;">//设置button按钮的宽</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bt.Height =&nbsp;<span style="color: #00008b;">35</span>;<span style="color: #008000;">//设置button按钮的高</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bt.Location =&nbsp;<span style="color: #008b8b; font-weight: bold;">new</span>&nbsp;<span style="color: #191970; font-weight: bold;">Point</span>(p_int_x,&nbsp;p_int_y);<span style="color: #008000;">//设置button按钮的位置</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bt.Click&nbsp;+=&nbsp;<span style="color: #008b8b; font-weight: bold;">new</span>&nbsp;<span style="color: #191970; font-weight: bold;">EventHandler</span>(bt_Click);<span style="color: #008000;">//定义button按钮的事件</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_int_x&nbsp;+=&nbsp;<span style="color: #00008b;">36</span>;<span style="color: #008000;">//设置下一个按钮的位置</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">if</span>&nbsp;((i&nbsp;+&nbsp;<span style="color: #00008b;">1</span>)&nbsp;%&nbsp;<span style="color: #00008b;">10</span>&nbsp;==&nbsp;<span style="color: #00008b;">0</span>)<span style="color: #008000;">//设置换行</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_int_x =&nbsp;<span style="color: #00008b;">10</span>;<span style="color: #008000;">//换行后重新设置X坐标</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_int_y&nbsp;+=&nbsp;<span style="color: #00008b;">36</span>;<span style="color: #008000;">//换行后重新设置Y坐标</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Controls.<span style="color: #191970; font-weight: bold;">Add</span>(bt);<span style="color: #008000;">//将button按钮放入窗体控件集合中</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G_th =&nbsp;<span style="color: #008b8b; font-weight: bold;">new</span>&nbsp;System.Threading.<span style="color: #191970; font-weight: bold;">Thread</span>(<span style="color: #008000;">//新建一条线程</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000;">delegate</span>()<span style="color: #008000;">//使用匿名方法</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000; font-weight: bold;">int</span>&nbsp;P_int_count =&nbsp;<span style="color: #00008b;">0</span>;<span style="color: #008000;">//初始化计数器</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">while</span>&nbsp;(<span style="color: #008b8b; font-weight: bold;">true</span>)<span style="color: #008000;">//开始无限循环</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_int_count =&nbsp;<span style="color: #008000;">//计数器累加</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++P_int_count&nbsp;&gt;&nbsp;<span style="color: #00008b;">100000000</span>&nbsp;?&nbsp;<span style="color: #00008b;">0</span>&nbsp;: P_int_count;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: bold;">this</span>.<span style="color: #191970; font-weight: bold;">Invoke</span>(<span style="color: #008000;">//将代码交给主线程执行</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(MethodInvoker)<span style="color: #ff0000;">delegate</span><span style="color: #008000;">//使用匿名方法</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lb_time.Text =&nbsp;<span style="color: #008000;">//窗体中显示计数</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_int_count.<span style="color: #191970; font-weight: bold;">ToString</span>();<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.Threading.Thread.<span style="color: #191970; font-weight: bold;">Sleep</span>(<span style="color: #00008b;">1000</span>);<span style="color: #008000;">//线程睡眠1秒</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G_th.IsBackground =&nbsp;<span style="color: #008b8b; font-weight: bold;">true</span>;<span style="color: #008000;">//设置线程为后台线程</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G_th.<span style="color: #191970; font-weight: bold;">Start</span>();<span style="color: #008000;">//开始执行线程</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G_int_num = G_random.<span style="color: #191970; font-weight: bold;">Next</span>(<span style="color: #00008b;">1</span>,&nbsp;<span style="color: #00008b;">100</span>);<span style="color: #008000;">//生成随机数</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btn_begin.Enabled =&nbsp;<span style="color: #008b8b; font-weight: bold;">false</span>;<span style="color: #008000;">//停用开始按钮</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000;">void</span>&nbsp;<span style="color: #191970; font-weight: bold;">bt_Click</span>(<span style="color: #ff0000;">object</span>&nbsp;sender,&nbsp;EventArgs e)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Control P_control = sender&nbsp;<span style="color: #008b8b; font-weight: bold;">as</span>&nbsp;Control;<span style="color: #008000;">//将sender转换为control类型对象</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">if</span>&nbsp;(<span style="color: #ff0000; font-weight: bold;">int</span>.<span style="color: #191970; font-weight: bold;">Parse</span>(P_control.Name)&nbsp;&gt;&nbsp;G_int_num)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_control.BackColor = Color.Red;<span style="color: #008000;">//设置按钮背景为红色</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_control.Enabled =&nbsp;<span style="color: #008b8b; font-weight: bold;">false</span>;<span style="color: #008000;">//设置按钮停用</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_control.Text =&nbsp;<span style="color: #0000ff;">&quot;大&quot;</span>;<span style="color: #008000;">//更改按钮文本</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">if</span>&nbsp;(<span style="color: #ff0000; font-weight: bold;">int</span>.<span style="color: #191970; font-weight: bold;">Parse</span>(P_control.Name)&nbsp;&lt;&nbsp;G_int_num)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_control.BackColor = Color.Red;<span style="color: #008000;">//设置按钮背景为红色</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_control.Enabled =&nbsp;<span style="color: #008b8b; font-weight: bold;">false</span>;<span style="color: #008000;">//设置按钮停用</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_control.Text =&nbsp;<span style="color: #0000ff;">&quot;小&quot;</span>;<span style="color: #008000;">//更改按钮文本</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">if</span>&nbsp;(<span style="color: #ff0000; font-weight: bold;">int</span>.<span style="color: #191970; font-weight: bold;">Parse</span>(P_control.Name)&nbsp;== G_int_num)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G_th.<span style="color: #191970; font-weight: bold;">Abort</span>();<span style="color: #008000;">//终止计数线程</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBox.<span style="color: #191970; font-weight: bold;">Show</span>(<span style="color: #ff0000;">string</span>.<span style="color: #191970; font-weight: bold;">Format</span>(<span style="color: #008000;">//显示游戏信息</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff;">&quot;恭喜你猜对了！共猜了{0}次 用时{1}秒&quot;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #191970; font-weight: bold;">GetCount</span>(),lb_time.Text),<span style="color: #0000ff;">&quot;恭喜！&quot;</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btn_begin.Enabled =&nbsp;<span style="color: #008b8b; font-weight: bold;">true</span>;<span style="color: #008000;">//启用开始按钮</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #808080;">///</span><span style="color: #008000;">&nbsp;<span style="color: #808080;">&lt;<span style="font-weight: bold;">summary</span>&gt;</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #808080;">///</span><span style="color: #008000;">&nbsp;用于查找窗体中Enable属性为False控件的数量</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #808080;">///</span><span style="color: #008000;">&nbsp;用于计算玩家有多少次没有猜中</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #808080;">///</span><span style="color: #008000;">&nbsp;<span style="color: #808080;">&lt;<span style="font-weight: bold;">/</span><span style="font-weight: bold;">summary</span>&gt;</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #808080;">///</span><span style="color: #008000;">&nbsp;<span style="color: #808080;">&lt;<span style="font-weight: bold;">returns</span>&gt;</span>返回没有猜中数量<span style="color: #808080;">&lt;<span style="font-weight: bold;">/</span><span style="font-weight: bold;">returns</span>&gt;</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000;">string</span>&nbsp;<span style="color: #191970; font-weight: bold;">GetCount</span>()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000; font-weight: bold;">int</span>&nbsp;P_int_temp =&nbsp;<span style="color: #00008b;">0</span>;<span style="color: #008000;">//初始化计数器</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">foreach</span>&nbsp;(Control c&nbsp;<span style="color: #0000ff; font-weight: bold;">in</span>&nbsp;Controls)<span style="color: #008000;">//遍历控件集合</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">if</span>&nbsp;(!c.Enabled)&nbsp;P_int_temp++;<span style="color: #008000;">//计数器累加</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000080;">return</span>&nbsp;P_int_temp.<span style="color: #191970; font-weight: bold;">ToString</span>();<span style="color: #008000;">//返回计数器信息</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #808080;">///</span><span style="color: #008000;">&nbsp;<span style="color: #808080;">&lt;<span style="font-weight: bold;">summary</span>&gt;</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #808080;">///</span><span style="color: #008000;">&nbsp;用于清空窗体中动态生成的按钮</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #808080;">///</span><span style="color: #008000;">&nbsp;<span style="color: #808080;">&lt;<span style="font-weight: bold;">/</span><span style="font-weight: bold;">summary</span>&gt;</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000;">void</span>&nbsp;<span style="color: #191970; font-weight: bold;">RemoveControl</span>()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">for</span>&nbsp;(<span style="color: #ff0000; font-weight: bold;">int</span>&nbsp;i =&nbsp;<span style="color: #00008b;">0</span>;&nbsp;i&nbsp;&lt;&nbsp;<span style="color: #00008b;">100</span>;&nbsp;i++)<span style="color: #008000;">//开始遍历100个按钮</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">if</span>&nbsp;(Controls.<span style="color: #191970; font-weight: bold;">ContainsKey</span>(<span style="color: #008000;">//窗体中是否有此按钮</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(i+<span style="color: #00008b;">1</span>).<span style="color: #191970; font-weight: bold;">ToString</span>()))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">for</span>&nbsp;(<span style="color: #ff0000; font-weight: bold;">int</span>&nbsp;j =&nbsp;<span style="color: #00008b;">0</span>;&nbsp;j&nbsp;&lt;&nbsp;Controls.Count;&nbsp;j++)<span style="color: #008000;">//遍历窗体控件集合</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">if</span>&nbsp;(Controls[j].Name ==&nbsp;<span style="color: #008000;">//是否查找到按钮</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(i&nbsp;+&nbsp;<span style="color: #00008b;">1</span>).<span style="color: #191970; font-weight: bold;">ToString</span>())<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Controls.<span style="color: #191970; font-weight: bold;">RemoveAt</span>(j);<span style="color: #008000;">//删除指定按钮</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000080;">break</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000ff; font-weight: bold;">private</span>&nbsp;<span style="color: #ff0000;">void</span>&nbsp;<span style="color: #191970; font-weight: bold;">Frm_Main_FormClosing</span>(<span style="color: #ff0000;">object</span>&nbsp;sender,&nbsp;FormClosingEventArgs e)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Environment.<span style="color: #191970; font-weight: bold;">Exit</span>(<span style="color: #00008b;">0</span>);<span style="color: #008000;">//强行关闭窗体</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
}&nbsp;
</div>