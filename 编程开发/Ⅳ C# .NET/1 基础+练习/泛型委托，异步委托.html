<!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!--defaultCSS-->
<title>泛型委托，异步委托</title>



<style type="text/css" id="wiz_custom_css">
body
{
    font-family: Microsoft YaHei UI,"Microsoft YaHei", Georgia,Helvetica,Arial,sans-serif,宋体, PMingLiU,serif;
    font-size: 10.5pt;
    line-height: 1.5;
}
html, body
{
    
    
}
h1 {
    font-size:1.5em;
    font-weight:bold;
}
h2 {
    font-size:1.4em;
    font-weight:bold;
}
h3 {
    font-size:1.3em;
    font-weight:bold;
}
h4 {
    font-size:1.2em;
    font-weight:bold;
}
h5 {
    font-size:1.1em;
    font-weight:bold;
}
h6 {
    font-size:1.0em;
    font-weight:bold;
}
img {
    border:0;
    max-width: 100%;
    height: auto !important;
}
blockquote {
    margin-top:0px;
    margin-bottom:0px;
}
table {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
td {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
</style>

<style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style><link type="text/css" rel="stylesheet" id="wiz_code_highlight_link" href="泛型委托，异步委托_files/wiz_code_highlight_41.css">
</head>

<body style="" >1.案例：拓展方法、泛型、委托当作方法参数使用 的综合。<div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="com">//1.声明委托（类型安全的方法指针！！！）</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">delegate</span><span class="pln"> bool </span><span class="typ">IsokDel</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;(</span><span class="pln">T obj</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="com">//2.方法（需要静态类）方法使用</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyListExt</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">    </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> myFindStrs</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;(</span><span class="kwd">this</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> </span><span class="typ">list</span><span class="pun">,</span><span class="typ">IsokDel</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> del</span><span class="pun">)</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">        </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"><span class="pln">            </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;();</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-cs"><span class="pln">            </span><span class="kwd">foreach</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> </span><span class="typ">list</span><span class="pun">)</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln">            </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">                </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">del</span><span class="pun">(</span><span class="pln">item</span><span class="pun">))</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">                </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">                    result</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">item</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">                </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">            </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">        </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"><span class="pln">    </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="com">//3.在方法中使用并调用</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">       </span><span class="typ">List</span><span class="str">&lt;string&gt;</span><span class="pln"> </span><span class="typ">list</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">List</span><span class="str">&lt;string&gt;</span><span class="pun">(){</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">                </span><span class="str">"1"</span><span class="pun">,</span><span class="str">"2"</span><span class="pun">,</span><span class="str">"3"</span><span class="pun">,</span><span class="str">"4"</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">            </span><span class="pun">};</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">            </span><span class="typ">list</span><span class="pun">.</span><span style="background-color: rgb(152, 251, 152);"><span class="pln">myFindStrs</span><span class="pun">(</span><span class="pln">myCal</span></span><span class="pun"><span style="background-color: rgb(152, 251, 152);">)</span>; //传入</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><font color="#93a1a1">//4。 对应的方法体定义</font></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pun"><div><span style="font-family: Consolas; line-height: 18px; font-size: 13px;">&nbsp;&nbsp;&nbsp;&nbsp;</span>private static bool <span style="background-color: rgb(152, 251, 152);">myCal</span>(string obj)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new NotImplementedException();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</div></span></code></li></ol></pre></div><div>2. 泛型委托，如上的升级。</div></div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln">            </span><span class="typ">Func</span><span class="pun">&lt;</span><span class="typ">int</span><span class="pun">,</span><span class="pln"> bool</span><span class="pun">&gt;</span><span class="pln"> del </span><span class="pun">=</span><span class="pln"> a </span><span class="pun">=&gt;</span><span class="pln"> a </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">; //实例化一个委托</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">            </span><span class="typ">List</span><span class="str">&lt;int&gt;</span><span class="pln"> myIntLst </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">List</span><span class="str">&lt;int&gt;</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pln"> </span><span class="pun">};</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">            </span><span class="kwd">var</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> myIntLst</span><span class="pun">.</span><span class="typ">Where</span><span class="pun">(</span><span class="pln">del</span><span class="pun">); //接受一个Fun&lt;&gt;返回集合。</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">            </span><span class="kwd">foreach</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> result</span><span class="pun">)</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">            </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">                </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="pln">item</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">            </span><span class="pun">}</span></code></li></ol></pre></div><div>3. 异步委托</div></div><div><font face="Microsoft YaHei UI">&nbsp; &nbsp; a) 同步调用委托形式。(begin 和 end的委托是同一个！！！）</font><br></div><div><font face="Microsoft YaHei UI">---BeginXXX开始，EndXXX阻塞当前线程获得值。</font></div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="com">//1.声明委托调用类型</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln"> </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">delegate</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> </span><span class="typ">AddDel</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> b</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="com">//2.异步调用委托</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"current main thread: {0}"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Thread</span><span class="pun">.</span><span class="typ">CurrentThread</span><span class="pun">.</span><span class="typ">ManagedThreadId</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">            </span><span class="com">//启动委托指向的方法来执行，具体由线程池来执行当前委托执行的方法</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">            </span><span class="typ">AddDel</span><span class="pln"> addDemo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AddDel</span><span class="pun">(</span><span class="typ">AddFun</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">            </span><span class="kwd">var</span><span class="pln"> ascResult </span><span class="pun">=</span><span class="pln"> addDemo</span><span class="pun">.</span><span class="typ">BeginInvoke</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"><span class="pln">            </span><span class="com">//阻塞当前线程，知道委托方法执行完毕，并将返回值交给result后，继续执行后面的代码.</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-cs"><span class="pln">            </span><span class="typ">int</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> addDemo</span><span class="pun">.</span><span class="typ">EndInvoke</span><span class="pun">(</span><span class="pln">ascResult</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"current main thread: {0}"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Thread</span><span class="pun">.</span><span class="typ">CurrentThread</span><span class="pun">.</span><span class="typ">ManagedThreadId</span><span class="pun">);</span></code></li></ol></pre></div><div>&nbsp; &nbsp;需要定义执行方法：</div></div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln">        </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> </span><span class="typ">AddFun</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="typ">int</span><span class="pln"> b</span><span class="pun">)</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">        </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"current work thread：{0}"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Thread</span><span class="pun">.</span><span class="typ">CurrentThread</span><span class="pun">.</span><span class="typ">ManagedThreadId</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> a </span><span class="pun">+</span><span class="pln"> b</span><span class="pun">;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">        </span><span class="pun">}</span></code></li></ol></pre></div><div><font face="Microsoft YaHei UI">&nbsp; &nbsp; b) 委托调用执行形式(相比如上方法，不阻塞！！！ 执行完毕后调用回调方法执行). <span style="background-color: rgb(152, 251, 152);">异步编程</span></font><br></div></div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="com">//注：前面都一样，具体的执行委托都一样</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"current main thread: {0}"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Thread</span><span class="pun">.</span><span class="typ">CurrentThread</span><span class="pun">.</span><span class="typ">ManagedThreadId</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">            </span><span class="com">//启动委托指向的方法来执行，具体由线程池来执行当前委托执行的方法</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">            </span><span class="typ">AddDel</span><span class="pln"> addDemo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AddDel</span><span class="pun">(</span><span class="typ">AddFun</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="com">//注：使用执行完成后调用委托，执行形式</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">           </span><span class="com">//使用回调函数</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">            </span><span class="kwd">var</span><span class="pln"> assResult </span><span class="pun">=</span><span class="pln"> addDemo</span><span class="pun">.</span><span class="typ">BeginInvoke</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AsyncCallback</span><span class="pun">(</span><span class="typ">MyDelCallBack</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"current main thread: {0}"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Thread</span><span class="pun">.</span><span class="typ">CurrentThread</span><span class="pun">.</span><span class="typ">ManagedThreadId</span><span class="pun">);</span></code></li></ol></pre></div><div>&nbsp; &nbsp; 具体的执行完成后的回调函数：</div></div><div><font face="Microsoft YaHei UI">&nbsp; &nbsp;&nbsp;</font><span style="font-family: 'Microsoft YaHei UI'; font-size: 10.5pt; line-height: 1.5;">&nbsp; &nbsp;&nbsp;</span><span style="font-family: 'Microsoft YaHei UI'; font-size: 10.5pt; line-height: 1.5;">&nbsp; &nbsp;&nbsp;</span><br></div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln">        </span><span class="com">//异步委托，执行完成了的回调函数</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="typ">MyDelCallBack</span><span style="background-color: rgb(152, 251, 152);"><span class="pun">(</span><span class="typ">IAsyncResult</span><span class="pln"> result</span><span class="pun">)</span></span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">        </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">            </span><span class="typ">AsyncResult</span><span class="pln"> aResult </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">AsyncResult</span><span class="pun">)</span><span class="pln">result</span><span class="pun">;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">            </span><span class="typ">AddDel</span><span class="pln"> del </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">AddDel</span><span class="pun">)</span><span class="pln">aResult</span><span class="pun">.</span><span class="typ">AsyncDelegate</span><span class="pun">;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">            </span><span class="typ">int</span><span class="pln"> addResult </span><span class="pun">=</span><span class="pln"> del</span><span class="pun">.</span><span class="typ">EndInvoke</span><span class="pun">(</span><span class="pln">result</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"async completed thread：{0}"</span><span class="pun">,</span><span class="pln">addResult</span><span class="pun">,</span><span class="typ">Thread</span><span class="pun">.</span><span class="typ">CurrentThread</span><span class="pun">.</span><span class="typ">ManagedThreadId</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">        </span><span class="pun">}</span></code></li></ol></pre></div><div>执行结果：</div><div>--其中前后主线程main thread都是9. 执行addDemo 委托中执行的work thread 是10. 最后调用完成后callBack中新委托调用结果是completed &nbsp;thread是3.</div><div><img src="泛型委托，异步委托_files/8453239a-7f14-4913-9deb-78f500d6cc2d.png" border="0" alt=""><br></div></body></html>