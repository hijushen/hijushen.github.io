<!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!--defaultCSS-->
<title>.NET C#语言2.0-4.0的各种特性:泛型</title>



<style type="text/css" id="wiz_custom_css">
body
{
    font-family: Microsoft YaHei UI,"Microsoft YaHei", Georgia,Helvetica,Arial,sans-serif,宋体, PMingLiU,serif;
    font-size: 10.5pt;
    line-height: 1.5;
}
html, body
{
    
    
}
h1 {
    font-size:1.5em;
    font-weight:bold;
}
h2 {
    font-size:1.4em;
    font-weight:bold;
}
h3 {
    font-size:1.3em;
    font-weight:bold;
}
h4 {
    font-size:1.2em;
    font-weight:bold;
}
h5 {
    font-size:1.1em;
    font-weight:bold;
}
h6 {
    font-size:1.0em;
    font-weight:bold;
}
img {
    border:0;
    max-width: 100%;
    height: auto !important;
}
blockquote {
    margin-top:0px;
    margin-bottom:0px;
}
table {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
td {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
</style>

<style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style><link type="text/css" rel="stylesheet" id="wiz_code_highlight_link" href=".NET C#语言2.0-4.0的各种特性-泛型_files/wiz_code_highlight_57.css"></head>

<body  style=""><font face="Microsoft YaHei UI">1. C#2.0开始的泛型，类型约束。类型参数化，包括了封闭和开放类型。有具体的入List&lt;string&gt;则是封闭而不是开发的，可以使用方法的t.ContainsGenericParameters属性来显示。静态类区别，2）不同类型共享同一个泛型的表现。3）类型参数的约束：a.引用类型约束where T:Stream(Class), b.值类型约束. where T:struct。 值类型具有公共的无参构造函数. c.构造函数类型约束,T:new(),多个的情况下需要最后一个制定.d.转换类型约束 T:接口名称或这T:U; e.组合约束 where T:class, IDisposable, new();</font><div><font face="Microsoft YaHei UI">2. C#2.0开始的可空类型.</font></div><div><font face="Microsoft YaHei UI">3. 匿名方法，对closure闭包的表现，外部变量（未被捕捉）和被捕捉的外部变量。 类当中的变量被分配到堆上.</font></div><div><font face="Microsoft YaHei UI">4. 迭代器语法糖，yield return已单独描述.</font></div><div><font face="Microsoft YaHei UI">5. C#3.0开始： 自动实现属性；隐式类型var；对象集合初始化器（注意：类型必须包括无参构造函数）。匿名类型：</font></div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="com">//使用集合对象初始化，隐式类型，自动实现属性完成的匿名类型用法</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="kwd">var</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pun">{</span><span class="typ">Name</span><span class="pun">=</span><span class="str">"good study"</span><span class="pun">,</span><span class="typ">Age</span><span class="pun">=</span><span class="lit">25</span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="kwd">var</span><span class="pln"> personcollection </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pun">[]</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">   </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">{</span><span class="typ">Name</span><span class="pun">=</span><span class="str">"Tom"</span><span class="pun">,</span><span class="typ">Age</span><span class="pun">=</span><span class="lit">30</span><span class="pun">},</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">   </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">{</span><span class="typ">Name</span><span class="pun">=</span><span class="str">"Lily"</span><span class="pun">,</span><span class="typ">Age</span><span class="pun">=</span><span class="lit">22</span><span class="pun">},</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">   </span><span class="kwd">new</span><span class="pln"> </span><span class="pun">{</span><span class="typ">Name</span><span class="pun">=</span><span class="str">"Jerry"</span><span class="pun">,</span><span class="typ">Age</span><span class="pun">=</span><span class="lit">32</span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"><span class="pun">}</span></code></li></ol></pre></div><div>6. Lambda表达式</div></div><div>表达式树和Lambda表达式的关系可见一斑.</div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="typ">Main</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">        </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">            </span><span class="com">//Lambda表达式构造成表达式树</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">            </span><span class="typ">Expression</span><span class="pun">&lt;</span><span class="typ">Func</span><span class="pun">&lt;</span><span class="typ">int</span><span class="pun">,</span><span class="pln"> </span><span class="typ">int</span><span class="pun">,</span><span class="pln"> </span><span class="typ">int</span><span class="pun">&gt;&gt;</span><span class="pln"> expresstionTree </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> a </span><span class="pun">+</span><span class="pln"> b</span><span class="pun">;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">            </span><span class="com">//方法生成委托</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">            </span><span class="typ">Func</span><span class="pun">&lt;</span><span class="typ">int</span><span class="pun">,</span><span class="pln"> </span><span class="typ">int</span><span class="pun">,</span><span class="pln"> </span><span class="typ">int</span><span class="pun">&gt;</span><span class="pln"> delistance </span><span class="pun">=</span><span class="pln"> expresstionTree</span><span class="pun">.</span><span class="typ">Compile</span><span class="pun">();</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">            </span><span class="com">//调用委托形成结果</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">            </span><span class="typ">int</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> delistance</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"2 plus 3 is :"</span><span class="pun">+</span><span class="pln">result</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">ReadKey</span><span class="pun">();</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln">        </span><span class="pun">}</span></code></li></ol></pre></div><div>7. Linq（Lambda表达式和拓展方法的组合）</div></div><div>第一种Linq to object 练习：</div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln">            </span><span class="typ">List</span><span class="str">&lt;int&gt;</span><span class="pln"> intArray </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">List</span><span class="str">&lt;int&gt;</span><span class="pun">();</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">            </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">10</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">            </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">                intArray</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">            </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"use linq method query from object, result:  "</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">            </span><span class="typ">LinqQuery</span><span class="pun">(</span><span class="pln">intArray</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-cs"><span class="com">//方法如下：</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln">        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="typ">LinqQuery</span><span class="pun">(</span><span class="typ">List</span><span class="str">&lt;int&gt;</span><span class="pln"> collection</span><span class="pun">)</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">        </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">            </span><span class="kwd">var</span><span class="pln"> queryResult </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> collection</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">                              </span><span class="kwd">where</span><span class="pln"> item </span><span class="pun">%</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">                              </span><span class="kwd">select</span><span class="pln"> item</span><span class="pun">;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">            </span><span class="kwd">foreach</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> queryResult</span><span class="pun">)</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">            </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">                </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="pln">item</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"><span class="pln">            </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-cs"><span class="pln">        </span><span class="pun">}</span></code></li></ol></pre></div><div>第二种Linq to xml练习：</div></div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln"> </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">string</span><span class="pln"> xmlString </span><span class="pun">=</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;Persons&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;Person ID='1'&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;Name&gt;zhangsan&lt;/Name&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;Age&gt;18&lt;/Age&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;/Person&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;Person ID='2'&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;Name&gt;lisi&lt;/Name&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;Age&gt;19&lt;/Age&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;/Person&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;Person ID='3'&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;Name&gt;wangwu&lt;/Name&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;Age&gt;20&lt;/Age&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;/Person&gt;"</span><span class="pln"> </span><span class="pun">+</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">               </span><span class="str">"&lt;/Persons&gt;"</span><span class="pun">;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"use linq method query from object, result:  "</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">            </span><span class="typ">LinqQuery</span><span class="pun">(</span><span class="pln">intArray</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"Linq method query result: "</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">            </span><span class="typ">UsingLinqLinqtoXMLQuery</span><span class="pun">();</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"><span class="pln">            </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">ReadKey</span><span class="pun">();</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="com" style="background-color: rgb(152, 251, 152);">//Linq的方法</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="typ">UsingLinqLinqtoXMLQuery</span><span class="pun">()</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">        </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">            </span><span class="typ">XElement</span><span class="pln"> xmlDoc </span><span class="pun">=</span><span class="pln"> </span><span class="typ">XElement</span><span class="pun">.</span><span class="typ">Parse</span><span class="pun">(</span><span class="pln">xmlString</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-cs"><span class="pln">            </span><span class="kwd">var</span><span class="pln"> queryResult </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> element </span><span class="kwd">in</span><span class="pln"> xmlDoc</span><span class="pun">.</span><span class="typ">Elements</span><span class="pun">(</span><span class="str">"Person"</span><span class="pun">)</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-cs"><span class="pln">                              </span><span class="kwd">where</span><span class="pln"> element</span><span class="pun">.</span><span class="typ">Element</span><span class="pun">(</span><span class="str">"Name"</span><span class="pun">).</span><span class="typ">Value</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"lisi"</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-cs"><span class="pln">                              </span><span class="kwd">select</span><span class="pln"> element</span><span class="pun">;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-cs"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-cs"><span class="pln">            </span><span class="kwd">foreach</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> xele </span><span class="kwd">in</span><span class="pln"> queryResult</span><span class="pun">)</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-cs"><span class="pln">            </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-cs"><span class="pln">                </span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"Name："</span><span class="pun">+</span><span class="pln">xele</span><span class="pun">.</span><span class="typ">Element</span><span class="pun">(</span><span class="str">"Name"</span><span class="pun">).</span><span class="typ">Value</span><span class="pun">+</span><span class="str">"ID："</span><span class="pun">+</span><span class="pln">xele</span><span class="pun">.</span><span class="typ">Attribute</span><span class="pun">(</span><span class="str">"ID"</span><span class="pun">).</span><span class="typ">Value</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-cs"><span class="pln">            </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-cs"><span class="pln">        </span><span class="pun">}</span></code></li></ol></pre></div><div><br></div></div></body></html>