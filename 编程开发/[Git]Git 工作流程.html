<!DOCTYPE html>
<html>
    <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        
         


        
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />

<link rel="dns-prefetch" href="http://res.wx.qq.com/">
<link rel="dns-prefetch" href="http://mmbiz.qpic.cn/">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">


        <title>[Git]Git 工作流程</title>
        
<link rel="stylesheet" type="text/css" href="[Git]Git 工作流程_files/page_mp_article_improve2a7a3f.css">
<style>
     
    </style>
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="http://res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg/page_mp_article_improve_pc2a7a3f.css">
<![endif]-->


    </head>
    <body id="activity-detail" class="zh_CN mm_appmsg" ontouchstart="">
        
    
    
    <div id="js_cmt_mine" class="discuss_container editing access" style="display:none;">
        <div class="discuss_container_inner">
            <h2 class="rich_media_title">Git 工作流程</h2>
            <span id="log"></span>
            <div class="frm_textarea_box_wrp">
                <span class="frm_textarea_box">
                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="留言将由公众号筛选后显示，对所有人可见。"></textarea>
                    <div class="emotion_tool">
                        <span class="emotion_switch" style="display:none;"></span>
                        <span id="js_emotion_switch" class="pic_emotion_switch_wrp">
                            <img class="pic_default" src="[Git]Git 工作流程_files/icon_emotion_switch.2x278965.png" alt="">
                            <img class="pic_active" src="[Git]Git 工作流程_files/icon_emotion_switch_active.2x278965.png" alt="">
                        </span>
                        <div class="emotion_panel" id="js_emotion_panel">
                            <span class="emotion_panel_arrow_wrp" id="js_emotion_panel_arrow_wrp">
                                <i class="emotion_panel_arrow arrow_out"></i>
                                <i class="emotion_panel_arrow arrow_in"></i>
                            </span>
                            <div class="emotion_list_wrp" id="js_slide_wrapper">
                                
                                
                            </div>
                            <ul class="emotion_navs" id="js_navbar">
                                
                            </ul>
                        </div>
                    </div>
                </span>
            </div>
            <div class="discuss_btn_wrp"><a id="js_cmt_submit" class="btn btn_primary btn_discuss btn_disabled" href="">提交</a></div>
            <div class="discuss_list_wrp" style="display:none">
                <div class="rich_tips with_line title_tips discuss_title_line">
                    <span class="tips">我的留言</span>
                </div>
                <ul class="discuss_list" id="js_cmt_mylist"></ul>
            </div>
            <div class="rich_tips tips_global loading_tips" id="js_mycmt_loading">
                <img src="[Git]Git 工作流程_files/icon_loading_white2805ea.gif" class="rich_icon icon_loading_white" alt="">
                <span class="tips">加载中</span>
            </div>
            <div class="wx_poptips" id="js_cmt_toast" style="display:none;">
                <img alt="" class="icon_toast" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAABqCAYAAABUIcSXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMTUxMzkxZS1jYWVhLTRmZTMtYTY2NS0xNTRkNDJiOGQyMWIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTA3QzM2RTg3N0UwMTFFNEIzQURGMTQzNzQzMDAxQTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTA3QzM2RTc3N0UwMTFFNEIzQURGMTQzNzQzMDAxQTUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NWMyOGVjZTMtNzllZS00ODlhLWIxZTYtYzNmM2RjNzg2YjI2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjIxNTEzOTFlLWNhZWEtNGZlMy1hNjY1LTE1NGQ0MmI4ZDIxYiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmvxj1gAAAVrSURBVHja7J15rF1TFMbXk74q1ZKHGlMkJVIhIgg1FH+YEpEQJCKmGBpThRoSs5jVVNrSQUvEEENIhGiiNf9BiERICCFIRbUiDa2qvudbOetF3Tzv7XWGffa55/uS7593977n3vO7e5+199p7v56BgQGh0tcmvAUERREUQVEERREUQVEERREUQVEERREUQVEERREUQVEERREUQVEERVAUQVEERVAUQbVYk+HdvZVG8b5F0xj4RvhouB+eCy8KrdzDJc1RtAX8ILxvx98V1GyCSkN98Cx4z/95/Wn4fj6j6tUEeN4wkFSnw1MJqj5NhBfAuwaUHREUg4lqNMmePVsHll/HFhVfe1t3FwpJI8DXCCquDrCWNN4B6Tb4M3Z98aTPmTvh0YHl18PXw29yZiKejoPvcUD6E74yFBJbVDk6Bb7K8aP/Hb4c/tRzEYIqprPhSxzlf4Uvhb/0Xoig8qnHAJ3lqPMzfDH8XZ4LEpRf2sVdA5/sqPO9Qfop70UJyn+/boaPddT5yrq7VUUvTIVJI7q74MMddXR8NB1eXcYvhBpZm0s2w72/o86HFoKvLau/pYaXzjLMdUJ6y0LwtWV9CIIaXtvA8+G9HHV03u5q+K+yH47U0NoRngPv7KjzHDwTLj0bS1BDazfJJlcnOOostC6ysnCT+q80G/sIvFVgeW09D8FPVT0uoP7VfvAD8NjA8pqmuAN+OcYAjso0RbIZ8DGB5TVNcRO8JMaHY9SXSdfa3eeANJimWBLrA7JFiZwIXye+NMUV8CcxP2SRFjXefok7NRjSGZJlWUPvw2/wtNiQirSoXWyMsR28wR7AzzYM0oXw+Y7yK+CLJGeaoqjyrJSdZJD6Ov4+z5y6NJc0Az7NUecHydIUy+v60KNyQHoM3nKI1y7YCFiq0i7uBvgER52vDdKqWn9djhY1Dn4G3n6Ecqm2rF74dvgoR53S0hQxW9RJAZAGW5bSn58QJA27dQ7uIEedjywEX5NKVxCqsY6y+qA+LxFI4+yZ6oH0trWkNan80jygtIUsc5SflgAsDXgehfdx1KkkTRE76tN+Xue2jnTU0Ru1oIbvpt30bBtKhOp5yaaRkts0lic8V1i6dPcIRx2d/l8Y8XtNNEg7OOo8bl1kmmOKnDsO88CaYzejau0hWZqiL7C83oCH4SeTHvwV2BqqsHRVztSEYOmWF80NeXZT6Hd4KflResE9vCnBOlCyGfDNAstHTVPUDWoQ1t3iW+9WNizvlhfd4aerXd+ThqiMfNR6+9LvOOro5OY5JX2H4+F7HZD+kGzlamMgldWiirQsjcwWFbjmqZJteekJLK9pisvgL6RhKvuciZiwzrWWGapfrPy30kBVcSBIrw0aD3PU0XB6cehntq7rTMf7/2iQlktDVdXJLXlg6VjmiYBn6rWSTRCH6hvJ0hQrpcGq8oidsmHpTP8t8DGO9/vcWt9qabiqPgup1yKyQwvC2tSefZ73SSpNkUJ4PlLorlHZ+446nc8f3fIyywlJhwrTuwVSjBa1ccvSxN0hjjoK5xVrYZMd9V6XbFfgBukixTwGLg8sDam3dZR/wZ6L/dJlin1en8LS+bgpFbz3Ygvzu1J1HKxYNqxGpCmaCEo12rrBorD6LRp8UbpcdR5VWhTW35KlKd6QFqjuM2XzwlpnMxTvSkuUwuG/Xlg6NtPjbT6WFimF/VG6LEvXgn8QGDjMbBukVECFwhpoS+CQatfX2Q1q6H7wENHdrfCr0lKleEB9JyxNneus+VJpsVL9TwI6W65LovWIGl3KtVJaLv7LBwYTFEERFEVQFEERFEVQFEERFEVQFEERFEVQFEERFEVQFEERFFWq/hFgADUMN4RzT6/OAAAAAElFTkSuQmCC">
                <p class="toast_content">已留言</p>
            </div>
        </div>
    </div>

    <div id="js_article" class="rich_media">
        
        <div id="js_top_ad_area" class="top_banner">
 
        </div>
                

        <div class="rich_media_inner">
            <div id="page-content">
                <div id="img-content" class="rich_media_area_primary">
                    <h2 class="rich_media_title" id="activity-name">
                        Git 工作流程 
                    </h2>
                    <div class="rich_media_meta_list">
                        						                        <em id="post-date" class="rich_media_meta rich_media_meta_text">2016-02-19</em>

                                                <a class="rich_media_meta rich_media_meta_link rich_media_meta_nickname" href="" id="post-user">ImportNew</a>
                        <span class="rich_media_meta rich_media_meta_text rich_media_meta_nickname">ImportNew</span>

                        <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                            <div class="profile_inner">
                                <strong class="profile_nickname">ImportNew</strong>
                                <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                                <p class="profile_meta">
                                <label class="profile_meta_label">微信号</label>
                                <span class="profile_meta_value">importnew</span>
                                </p>

                                <p class="profile_meta">
                                <label class="profile_meta_label">功能介绍</label>
                                <span class="profile_meta_value">专注&nbsp;Java&nbsp;和&nbsp;Android&nbsp;技术分享。ImportNew&nbsp;由两个&nbsp;Java&nbsp;关键字&nbsp;import&nbsp;和&nbsp;new&nbsp;组成。意指：Java&nbsp;&amp;&nbsp;Android&nbsp;程序员学习新知识的网站。</span>
                                </p>
                                
                            </div>
                            <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                                <i class="profile_arrow arrow_out"></i>
                                <i class="profile_arrow arrow_in"></i>
                            </span>
                        </div>
                    </div>
                    
                    
                    
                    
                                                            
                                                            
                    
                    <div class="rich_media_content " id="js_content">
                        
                        <p style="font-size: 16.1904773712158px; line-height: 24.3809547424316px; white-space: normal; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); text-align: center; box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255);"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(192, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; color: rgb(0, 176, 80); font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(192, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; color: rgb(0, 176, 80); border: 0px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(192, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(255, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;">(点击</span><span style="max-width: 100%; color: rgb(0, 112, 192); box-sizing: border-box !important; word-wrap: break-word !important;">上方公众号</span><span style="max-width: 100%; color: rgb(255, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;">，可快速关注)</span></span></strong></span></strong></strong></span></strong></span></strong></p><p style="font-size: 16.1904773712158px; line-height: 24.3809547424316px; white-space: normal; max-width: 100%; min-height: 1em; color: rgb(62, 62, 62); box-sizing: border-box !important; word-wrap: break-word !important; background-color: rgb(255, 255, 255);"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(192, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; color: rgb(0, 176, 80); font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(192, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; color: rgb(0, 176, 80); border: 0px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(192, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(0, 176, 240); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(255, 0, 0); box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span></span></strong></span></strong></strong></span></strong></span></strong></p><blockquote style="font-size: 16.1904773712158px; line-height: 24.3809547424316px; white-space: normal;"><p style="max-width: 100%; min-height: 1em; white-space: pre-wrap; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(0, 176, 80); font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">来源</span><span style="max-width: 100%; color: rgb(0, 176, 80); font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">：</span><span style="max-width: 100%; color: rgb(0, 176, 80); font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">阮一峰</span></p><p style="max-width: 100%; min-height: 1em; white-space: pre-wrap; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(0, 176, 80); font-size: 14px; box-sizing: border-box !important; word-wrap: break-word !important;">网址：http://www.ruanyifeng.com/blog/2015/12/git-workflow.html</span></p></blockquote><p><br  /></p><p>Git 作为一个源码管理系统，不可避免涉及到多人协作。</p><p><br  /></p><p>协作必须有一个规范的工作流程，让大家有效地合作，使得项目井井有条地发展下去。”工作流程”在英语里，叫做”workflow”或者”flow”，原意是水流，比喻项目像水流那样，顺畅、自然地向前流动，不会发生冲击、对撞、甚至漩涡。</p><p><br  /></p><p><img class="aligncenter"  width="600" height="164" style="border: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center;" data-type="png" data-ratio="0.2733812949640288" data-w=""   SRC="[Git]Git 工作流程_files/0.png" /></p><p><br  /></p><p>本文介绍三种广泛使用的工作流程：</p><p><br  /></p><ul style="" class=" list-paddingleft-2"><li><p>Git flow</p></li><li><p>Github flow</p></li><li><p>Gitlab flow</p></li></ul><p><br  /></p><p>如果你对Git还不是很熟悉，可以先阅读下面的文章。</p><p><br  /></p><ul style="" class=" list-paddingleft-2"><li><p>《Git 使用规范流程》</p></li><li><p>《常用 Git 命令清单》</p></li><li><p>《Git 远程操作详解》</p></li></ul><p><br  /></p><p><span style="color: rgb(214, 168, 65);"><strong>一、功能驱动</strong></span></p><p><br  />本文的三种工作流程，有一个共同点：都采用”功能驱动式开发”（Feature-driven development，简称FDD）。</p><p><br  />它指的是，需求是开发的起点，先有需求再有功能分支（feature branch）或者补丁分支（hotfix branch）。完成开发后，该分支就合并到主分支，然后被删除。</p><p><br  /></p><p><span style="color: rgb(214, 168, 65);"><strong>二、Git flow</strong></span><br  /><br  />最早诞生、并得到广泛采用的一种工作流程，就是Git flow 。</p><p><br  /></p><p>2.1 特点<br  /><br  />它最主要的特点有两个。</p><p><br  /></p><p><img class="aligncenter"  width="450" height="678" style="border: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center;" data-type="png" data-ratio="1.5066666666666666" data-w="450"   SRC="[Git]Git 工作流程_files/0_2.png" /></p><p><br  /></p><p>首先，项目存在两个长期分支。</p><p><br  /></p><ul style="" class=" list-paddingleft-2"><li><p>主分支master</p></li><li><p>开发分支develop</p></li></ul><p><br  /></p><p>前者用于存放对外发布的版本，任何时候在这个分支拿到的，都是稳定的分布版；后者用于日常开发，存放最新的开发版。</p><p><br  />其次，项目存在三种短期分支。</p><p><br  /></p><ul style="" class=" list-paddingleft-2"><li><p>功能分支（feature branch）</p></li><li><p>补丁分支（hotfix branch）</p></li><li><p>预发分支（release branch）</p></li></ul><p><br  /></p><p>一旦完成开发，它们就会被合并进develop或master，然后被删除。<br  />Git flow 的详细介绍，请阅读我翻译的中文版《Git 分支管理策略》。</p><p><br  /></p><p>2.2 评价<br  /><br  />Git flow的优点是清晰可控，缺点是相对复杂，需要同时维护两个长期分支。大多数工具都将master当作默认分支，可是开发是在develop分支进行的，这导致经常要切换分支，非常烦人。</p><p><br  /></p><p>更大问题在于，这个模式是基于”版本发布”的，目标是一段时间以后产出一个新版本。但是，很多网站项目是”持续发布”，代码一有变动，就部署一次。这时，master分支和develop分支的差别不大，没必要维护两个长期分支。</p><p><br  /></p><p><span style="color: rgb(214, 168, 65);"><strong>三、Github flow</strong></span><br  /><br  />Github flow 是Git flow的简化版，专门配合”持续发布”。它是 Github.com 使用的工作流程。</p><p><br  /></p><p>3.1 流程<br  /><br  />它只有一个长期分支，就是master，因此用起来非常简单。</p><p><br  />官方推荐的流程如下。</p><p><br  /></p><p><img class="aligncenter"  width="750" height="138" style="border: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center;" data-type="png" data-ratio="0.18345323741007194" data-w=""   SRC="[Git]Git 工作流程_files/0_3.png" /></p><ul style="" class=" list-paddingleft-2"><li><p>第一步：根据需求，从master拉出新分支，不区分功能分支或补丁分支。</p></li><li><p>第二步：新分支开发完成后，或者需要讨论的时候，就向master发起一个pull request（简称PR）。</p></li><li><p>第三步：Pull Request既是一个通知，让别人注意到你的请求，又是一种对话机制，大家一起评审和讨论你的代码。对话过程中，你还可以不断提交代码。</p></li><li><p>第四步：你的Pull Request被接受，合并进master，重新部署后，原来你拉出来的那个分支就被删除。（先部署再合并也可。）</p></li></ul><p><br  /></p><p>3.2 评价<br  /><br  />Github flow 的最大优点就是简单，对于”持续发布”的产品，可以说是最合适的流程。</p><p><br  /></p><p>问题在于它的假设：master分支的更新与产品的发布是一致的。也就是说，master分支的最新代码，默认就是当前的线上代码。</p><p><br  /></p><p>可是，有些时候并非如此，代码合并进入master分支，并不代表它就能立刻发布。比如，苹果商店的APP提交审核以后，等一段时间才能上架。这时，如果还有新的代码提交，master分支就会与刚发布的版本不一致。另一个例子是，有些公司有发布窗口，只有指定时间才能发布，这也会导致线上版本落后于master分支。</p><p><br  /></p><p>上面这种情况，只有master一个主分支就不够用了。通常，你不得不在master分支以外，另外新建一个production分支跟踪线上版本。</p><p><br  /></p><p><span style="color: rgb(214, 168, 65);"><strong>四、Gitlab flow</strong></span><br  /><br  />Gitlab flow 是 Git flow 与 Github flow 的综合。它吸取了两者的优点，既有适应不同开发环境的弹性，又有单一主分支的简单和便利。它是 Gitlab.com 推荐的做法。</p><p><br  /></p><p>4.1 上游优先<br  /><br  />Gitlab flow 的最大原则叫做”上游优先”（upsteam first），即只存在一个主分支master，它是所有其他分支的”上游”。只有上游分支采纳的代码变化，才能应用到其他分支。</p><p><br  /></p><p>Chromium项目就是一个例子，它明确规定，上游分支依次为：</p><p><br  /></p><ul style="" class=" list-paddingleft-2"><li><p>Linus Torvalds的分支</p></li><li><p>子系统（比如netdev）的分支</p></li><li><p>设备厂商（比如三星）的分支</p></li></ul><p><br  /></p><p>4.2 持续发布<br  /><br  />Gitlab flow 分成两种情况，适应不同的开发流程。</p><p><br  /></p><p><img class="aligncenter"  width="560" height="618" style="border: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center;" data-type="png" data-ratio="1.10431654676259" data-w=""   SRC="[Git]Git 工作流程_files/0_4.png" /></p><p>&nbsp;</p><p>对于”持续发布”的项目，它建议在master分支以外，再建立不同的环境分支。比如，”开发环境”的分支是master，”预发环境”的分支是pre-production，”生产环境”的分支是production。</p><p><br  /></p><p>开发分支是预发分支的”上游”，预发分支又是生产分支的”上游”。代码的变化，必须由”上游”向”下游”发展。比如，生产环境出现了bug，这时就要新建一个功能分支，先把它合并到master，确认没有问题，再cherry-pick到pre-production，这一步也没有问题，才进入production。</p><p><br  /></p><p>只有紧急情况，才允许跳过上游，直接合并到下游分支。</p><p><br  /></p><p>4.3 版本发布</p><p><br  /><img class="aligncenter"  width="550" height="719" style="border: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center;" data-type="png" data-ratio="1.3072727272727274" data-w="550"   SRC="[Git]Git 工作流程_files/0_5.png" />&nbsp;</p><p><br  /></p><p>对于”版本发布”的项目，建议的做法是每一个稳定版本，都要从master分支拉出一个分支，比如2-3-stable、2-4-stable等等。</p><p><br  />以后，只有修补bug，才允许将代码合并到这些分支，并且此时要更新小版本号。</p><p><br  /></p><p><span style="color: rgb(214, 168, 65);"><strong>五、一些小技巧</strong></span><br  /><br  />5.1 Pull Request<br  /></p><p><br  /></p><p><img class="aligncenter"  width="750" height="600" style="border: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center;" data-type="png" data-ratio="0.8003597122302158" data-w=""   SRC="[Git]Git 工作流程_files/0_6.png" /></p><p><br  /></p><p>功能分支合并进master分支，必须通过Pull Request（Gitlab里面叫做 Merge Request）。</p><p><br  /></p><p><img class="aligncenter"  width="674" height="344" style="border: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center;" data-type="png" data-ratio="0.5107913669064749" data-w=""   SRC="[Git]Git 工作流程_files/0_7.png" /></p><p><br  /></p><p>前面说过，Pull Request本质是一种对话机制，你可以在提交的时候，@相关人员或团队，引起他们的注意。</p><p><br  /></p><p>5.2 Protected branch<br  /><br  />master分支应该受到保护，不是每个人都可以修改这个分支，以及拥有审批 Pull Request 的权力。</p><p><br  />Github 和 Gitlab 都提供”保护分支”（Protected branch）这个功能。</p><p><br  /></p><p>5.3 Issue</p><p><br  /></p><p>Issue 用于 Bug追踪和需求管理。建议先新建 Issue，再新建对应的功能分支。功能分支总是为了解决一个或多个 Issue。</p><p><br  />功能分支的名称，可以与issue的名字保持一致，并且以issue的编号起首，比如”15-require-a-password-to-change-it”。</p><p><br  /></p><p><img class="aligncenter"  width="484" height="193" style="border: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center;" data-type="png" data-ratio="0.3987603305785124" data-w="484"   SRC="[Git]Git 工作流程_files/0_8.png" /></p><p>&nbsp;</p><p>开发完成后，在提交说明里面，可以写上”fixes #14″或者”closes #67″。Github规定，只要commit message里面有下面这些动词 + 编号，就会关闭对应的issue。</p><p><br  /></p><ul style="" class=" list-paddingleft-2"><li><p>close</p></li><li><p>closes</p></li><li><p>closed</p></li><li><p>fix</p></li><li><p>fixes</p></li><li><p>fixed</p></li><li><p>resolve</p></li><li><p>resolves</p></li><li><p>resolved</p></li></ul><p><br  /></p><p>这种方式还可以一次关闭多个issue，或者关闭其他代码库的issue，格式是username/repository#issue_number。</p><p><br  />Pull Request被接受以后，issue关闭，原始分支就应该删除。如果以后该issue重新打开，新分支可以复用原来的名字。</p><p><br  /></p><p>5.4 Merge节点</p><p><br  /></p><p>Git有两种合并：一种是”直进式合并”（fast forward），不生成单独的合并节点；另一种是”非直进式合并”（none fast-forword），会生成单独节点。</p><p><br  /></p><p>前者不利于保持commit信息的清晰，也不利于以后的回滚，建议总是采用后者（即使用–no-ff参数）。只要发生合并，就要有一个单独的合并节点。</p><p><br  /></p><p>5.5 Squash 多个commit</p><p><br  /></p><p>为了便于他人阅读你的提交，也便于cherry-pick或撤销代码变化，在发起Pull Request之前，应该把多个commit合并成一个。（前提是，该分支只有你一个人开发，且没有跟master合并过。）</p><p><br  /></p><p><img class="aligncenter"  width="657" height="495" style="border: 0px; font-size: 0px; color: transparent; vertical-align: middle; text-align: center;" data-type="png" data-ratio="0.7535971223021583" data-w=""   SRC="[Git]Git 工作流程_files/0_9.jpg" /></p><p>&nbsp;</p><p>这可以采用rebase命令附带的squash操作，具体方法请参考我写的《Git 使用规范流程》。</p><p><br  /></p><p style="font-size: 16.1904773712158px; white-space: normal; text-align: center; color: rgb(62, 62, 62); line-height: 28.44px; min-height: 1em; max-width: 100%; box-sizing: border-box !important; background-color: rgb(255, 255, 255);"><span style="color: rgb(136, 136, 136); font-size: 20px; max-width: 100%; box-sizing: border-box !important;">【今日微信公号推荐↓】</span></p><p style="font-size: 16.1904773712158px; white-space: normal; text-align: center; color: rgb(62, 62, 62); line-height: 28.44px; min-height: 1em; max-width: 100%; box-sizing: border-box !important; background-color: rgb(255, 255, 255);"><span style="line-height: 1.6; max-width: 100%; box-sizing: border-box !important;"></span><img data-s="300,640" data-type="png" data-ratio="0.6276978417266187" data-w=""  style="color: rgb(62, 62, 62); font-size: 16.1904773712158px; line-height: 24.3809547424316px; white-space: pre-wrap; box-sizing: border-box !important; word-wrap: break-word !important; width: auto !important; visibility: visible !important; background-color: rgb(255, 255, 255);"   SRC="[Git]Git 工作流程_files/640.jpg" /></p><p style="font-size: 16.1904773712158px; white-space: normal; text-align: center; line-height: 25.6px;"><span style="font-size: 14px;">更多推荐请看</span><strong><span style="font-size: 14px;">《</span></strong><a href="http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&mid=402729167&idx=1&sn=5a02d08e2dd393f7b1cd08409a4a5000&scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=402729167&amp;idx=1&amp;sn=5a02d08e2dd393f7b1cd08409a4a5000&amp;scene=21#wechat_redirect"><span style="color: rgb(255, 169, 0);"><span style="text-decoration: underline;">值得关注的技术和设计公众号</span></span></a><span style="font-size: 14px;"><strong><span style="font-size: 16px;">》</span></strong></span></p><p style="font-size: 16.1904773712158px; white-space: normal; line-height: 25.6px;"><span style="color: rgb(136, 136, 136); font-size: 14px;"><br  /></span></p><p style="font-size: 16.1904773712158px; white-space: normal; line-height: 1.75em;"><span style="color: rgb(136, 136, 136); font-size: 14px;">其中推荐了包括<strong>技术</strong>、<strong>设计</strong>、<strong>极客</strong>和<strong>IT相亲</strong>相关的热门公众号。技术涵盖：Python、Web前端、Java、安卓、iOS、PHP、C/C++、.NET、Linux、数据库、运维、大数据、算法、IT职场等。点击《</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&mid=402729167&idx=1&sn=5a02d08e2dd393f7b1cd08409a4a5000&scene=21#wechat_redirect" target="_blank" data_ue_src="http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=402729167&amp;idx=1&amp;sn=5a02d08e2dd393f7b1cd08409a4a5000&amp;scene=21#wechat_redirect"><span style="color: rgb(255, 169, 0); font-size: 14px;"><span style="text-decoration: underline;">值得关注的技术和设计公众号</span></span></a><span style="color: rgb(136, 136, 136); font-size: 14px;">》，发现精彩！</span><br  /><img  data-ratio="0.9172661870503597" data-s="300,640" data-type="png" data-w="" style="line-height: 28.44px;"   SRC="[Git]Git 工作流程_files/0_10.jpg" /></p>
                    </div>
                    
                    <link rel="stylesheet" type="text/css" href="[Git]Git 工作流程_files/page_mp_article_improve_combo2a7a3f.css">
                    
                    
                                        
                                        
                                        <div class="rich_media_tool" id="js_toobar3">
                                                                    <div id="js_read_area3" class="media_tool_meta tips_global meta_primary" style="display:none;">阅读 <span id="readNum3"></span></div>

                        <span style="display:none;" class="media_tool_meta meta_primary tips_global meta_praise" id="like3">
                            <i class="icon_praise_gray"></i><span class="praise_num" id="likeNum3"></span>
                        </span>

                        <a id="js_report_article3" style="display:none;" class="media_tool_meta tips_global meta_extra" href="">举报</a>

                    </div>
                </div>

                <div class="rich_media_area_extra">

                    
                                        <div class="mpda_bottom_container" id="js_bottom_ad_area">
                        
                    </div>
                                        
                    <div id="js_iframetest" style="display:none;"></div>

                    
                                        <div class="rich_media_extra" id="js_cmt_area" style="display:none">

                        <div class="discuss_container" id="js_cmt_main" style="display:none">
                            <div class="rich_tips with_line title_tips discuss_title_line">
                                <span class="tips">精选留言</span>
                            </div>
                            <p class="tips_global tc title_bottom_tips" id="js_cmt_nofans1" style="display:none;">关注该公众号可参与留言</p>
                            <p class="discuss_icon_tips title_bottom_tips tr" id="js_cmt_addbtn1" style="display:none">
                                
                                                                <a href="#comment">写留言<img class="icon_edit" src="[Git]Git 工作流程_files/icon_edit25ded2.png" alt=""></a>
                                                            </p>
                            <ul class="discuss_list" id="js_cmt_list"></ul>
                        </div>


                        <div class="tips_global rich_split_tips tc" id="js_cmt_nofans2" style="display:none;">
                            关注该公众号可参与留言
                        </div>

                        <p class="discuss_icon_tips rich_split_tips tr" id="js_cmt_addbtn2" style="display:none">
                            
                                                        <a href="#comment">写留言<img class="icon_edit" src="[Git]Git 工作流程_files/icon_edit25ded2.png" alt=""></a>
                                                    </p>

                        <p class="rich_split_tips tc tips_global" id="js_cmt_tips" style="display:none;"></p>


                        <div class="rich_tips tips_global loading_tips" id="js_cmt_loading">
                            <img src="[Git]Git 工作流程_files/icon_loading_white2805ea.gif" class="rich_icon icon_loading_white" alt="">
                            <span class="tips">加载中</span>
                        </div>

                        <div class="rich_tips with_line tips_global" id="js_cmt_statement" style="display:none">
                            <span class="tips">以上留言由公众号筛选后显示</span>
                        </div>

                        <p class="rich_split_tips tc" id="js_cmt_qa" style="display:none;">
                            <a href="http://kf.qq.com/touch/sappfaq/150211YfyMVj150313qmMbyi.html?scene_id=kf264">
                                了解留言功能详情
                            </a>
                        </p>

                    </div>
                                    </div>
               
            </div>
            <div id="js_pc_qr_code" class="qr_code_pc_outer" style="display:none;">
                <div class="qr_code_pc_inner">
                    <div class="qr_code_pc">
                        <img id="js_pc_qr_code_img" class="qr_code_pc_img">
                        <p>微信扫一扫<br>关注该公众号</p>
                    </div>
                </div>
            </div>

        </div>
    </div>


        
        
        
    

    
  

  


    </body>
</html>

 
