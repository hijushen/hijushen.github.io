<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>[学习笔记] [pro mvc 3] 1.md</title>
    <!--mark |wiz_custom_css| for wizeditor replace it-->


<style id="wiz_custom_css">        html, body {            font-size: 15px;        }        body {            font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;            line-height: 1.6;            margin: 0;            padding: 20px 36px;            padding: 1.33rem 2.4rem;        }        h1, h2, h3, h4, h5, h6 {            margin: 20px 0 10px;            margin: 1.33rem 0 0.667rem;            padding: 0;            font-weight: bold;        }        h1 {            font-size: 21px;            font-size: 1.4rem;        }        h2 {            font-size: 20px;            font-size: 1.33rem;        }        h3 {            font-size: 18px;            font-size: 1.2rem;        }        h4 {            font-size: 17px;            font-size: 1.13rem;        }        h5 {            font-size: 15px;            font-size: 1rem;        }        h6 {            font-size: 15px;            font-size: 1rem;            color: #777777;            margin: 1rem 0;        }        div, p, ul, ol, dl, li {            margin: 0;        }        blockquote, table, pre, code {            margin: 8px 0;        }        ul, ol {            padding-left: 32px;            padding-left: 2.13rem;        }        blockquote {            padding: 0 12px;            padding: 0 0.8rem;        }        blockquote > :first-child {            margin-top: 0;        }        blockquote > :last-child {            margin-bottom: 0;        }        img {            border: 0;            max-width: 100%;            height: auto !important;            margin: 2px 0;        }        table {            border-collapse: collapse;            border: 1px solid #bbbbbb;        }        td {            padding: 4px 8px;            border-collapse: collapse;            border: 1px solid #bbbbbb;        }        @media screen and (max-width: 660px) {            body {                padding: 20px 18px;                padding: 1.33rem 1.2rem;            }        }        @media only screen and (-webkit-max-device-width: 1024px), only screen and (-o-max-device-width: 1024px), only screen and (max-device-width: 1024px), only screen and (-webkit-min-device-pixel-ratio: 3), only screen and (-o-min-device-pixel-ratio: 3), only screen and (min-device-pixel-ratio: 3) {            html, body {                font-size: 17px;            }            body {                line-height: 1.7;                padding: 0.75rem 0.9375rem;                color: #353c47;            }            h1 {                font-size: 2.125rem;            }            h2 {                font-size: 1.875rem;            }            h3 {                font-size: 1.625rem;            }            h4 {                font-size: 1.375rem;            }            h5 {                font-size: 1.125rem;            }            h6 {                color: inherit;            }            ul, ol {                padding-left: 2.5rem;            }            blockquote {                padding: 0 0.9375rem;            }        }</style><style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style></head>

<body  style=""><div style="font-size: 15px; line-height: 24px;"><span style="color: rgb(178, 34, 34);">[toc]</span></div><div style="font-size: 15px; line-height: 24px;"><span style="color: rgb(178, 34, 34); font-size: 15px; line-height: 24px;">### 创建一个新的ASP.NET 项目</span><br></div><div style="font-size: 15px; line-height: 24px;"><span style="color: rgb(128, 128, 128);">-&nbsp;</span>增加一个控制器, 返回string,显示在窗口上.<br><span style="color: rgb(128, 128, 128);">-&nbsp;</span>增加一个view. 不使用Layout 布局等, 修改control 返回该<span style="color: rgb(0, 128, 0);">`view`</span>.<br><span style="color: rgb(128, 128, 128);">-&nbsp;</span><span style="color: rgb(0, 128, 0);">`@ViewBag`</span>对象的传递, 在<span style="color: rgb(0, 128, 0);">`control`</span>中定义返回后, 在<span style="color: rgb(0, 128, 0);">`view`</span>视图中完全可用.&nbsp;<br><span style="color: rgb(128, 128, 128);">-&nbsp;</span>增加一个模型类, 使用<span style="color: rgb(0, 128, 0);">`@Html.ActionLink("名称","动作")`</span>完成项目的跳转, 增加<span style="color: rgb(0, 128, 0);">`动作`</span>内容, 然后增加一个强类型视图的<span style="color: rgb(0, 128, 0);">`View`</span>.&nbsp;<br><span style="color: rgb(128, 128, 128);">-&nbsp;</span>模型绑定17章. 强类型后消除了手动处理<span style="color: rgb(0, 128, 0);">`R&nbsp;&nbsp;&nbsp;&nbsp;equest.Form[]`</span>和<span style="color: rgb(0, 128, 0);">`Request.QueryString[]`</span>内容, 它自动填充完成了表单数据的填充.<br><span style="color: rgb(128, 128, 128);">-&nbsp;</span>渲染其他的视图,&nbsp;<span style="color: rgb(0, 128, 0);">`view("Thanks",getResponse)`</span>等. 强类型传递后, 直接使用<span style="color: rgb(0, 128, 0);">`Model.属性`</span>名完成对象的赋值.<br></div><div style="font-size: 15px; line-height: 24px;"><br></div><div style="font-size: 15px; line-height: 24px;">&nbsp;-<span style="color: rgb(0, 128, 0);">`Controller`</span>下三个<br><span style="color: rgb(128, 128, 128);">&nbsp;&nbsp;-&nbsp;</span>服务管理器&nbsp;<span style="color: rgb(0, 128, 0);">``</span><br><span style="color: rgb(128, 128, 128);">&nbsp;&nbsp;-&nbsp;</span><span style="color: rgb(0, 128, 0);">`IAuthorizationWrapperManager`</span><br><span style="color: rgb(128, 128, 128);">&nbsp;&nbsp;-&nbsp;</span><span style="color: rgb(0, 128, 0);">`ICRECService`</span>&nbsp;服务管理器</div><div style="font-size: 15px; line-height: 24px;"><br></div><div style="font-size: 15px; line-height: 24px;"><span style="color: #b22222;">## MVC 概念</span><br><span style="color: #b22222;">### 理解域模型</span><br><span style="color: #b22222;">### MVP模型, 更容易使用状态化的GUI平台, 如Windows表单或ASP.NET的Web表单.</span><br><span style="color: #808080;">-&nbsp;</span>P层负责Controller层逻辑, 被动视图中, 视图 不包含逻辑. 它是UI控件的容器, 由呈现器直接进行操纵.<br><span style="color: #808080;">-&nbsp;</span>监管控制器实现, 视图负责一些具有表现逻辑的元素, 如数据绑定, 并给出对域模型数据源的引用.<br><span style="color: #808080;">-&nbsp;</span>差异: 涉及视图如何智能化. 任一种方式, 呈现器与GUI框架都是解耦的, 使得呈现器逻辑简单并且易于单元测试.<br><br><span style="color: #b22222;">### MVVM 模式</span><br><span style="color: #808080;">-&nbsp;</span>WPF和Silverlight的基础.<br><span style="color: #808080;">-&nbsp;</span>VM是UI的一种抽象表示.&nbsp;&nbsp;视图控件双向绑定. 不一定适用于WPF外的其他平台.<br><br><span style="color: #b22222;">### DDD运用域驱动开发</span><br><span style="color: #808080;">-&nbsp;</span>模型绑定: 约定的特性, 输入数据(HTML表单的提交)自动填充模型对象.<br><span style="color: #808080;">-&nbsp;</span>模型元数据:模型类的含义描述给框架．　MVC 框架自动在视图中渲染模型类的显示或编辑的UI.<br><span style="color: #808080;">-&nbsp;</span>验证. 模型绑定期间执行的, 运用了能够被定义为元数据的规则.<br><br><span style="color: #b22222;">### DI容器</span><br><span style="color: #808080;">-&nbsp;</span>依赖链解析: 请求一个具有其自身依赖性的组件(如 构造器参数), 这个容器也会满足这个特性.<br><span style="color: #808080;">-&nbsp;</span>对象生命周期管理. 请求一个组件, 多次之后, 究竟需要何种.&nbsp;<br><span style="color: #808080;">-&nbsp;</span>构造器参数配置.&nbsp;<br><span style="color: #808080;">-&nbsp;</span>自绑定. 绑定到派生版本.<br><span style="color: #808080;">-&nbsp;</span>使用条件绑定.<br><br><span style="color: #b22222;">### 在ASP.NET中使用Ninject.</span><br><span style="color: #808080;">-&nbsp;</span>自定义<span style="color: #008000;">`NinjectControllerFactory`</span>继承MVC默认<span style="color: #008000;">`DefaultControllerFactory`</span>类型,完成相应<span style="color: #008000;">`IProductRepository`</span>等的绑定后.<br><span style="color: #808080;">-&nbsp;</span>在<span style="color: #008000;">`Global.asax`</span>文件注册中完成这个工厂的注册, MVC在生成<span style="color: #008000;">`controller`</span>中就会自动执行相应<span style="color: #008000;">`NinjedtControllerFactory`</span>的过程. 注意<span style="color: #008000;">`Controller`</span>的构造参数.<br><br><span style="color: #b22222;">### 使用单元测试</span><br><span style="color: #808080;">-&nbsp;</span>定义测试方法, 引入工程后进行断言assert等.<br><span style="color: #808080;">-&nbsp;</span>使用<span style="color: #008000;">`mock`</span>模仿数据, 不需要定义相应数据仓库, 完成数据模拟.&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;- `mock.Vertify(m=&gt;UpdateProduct(p),Times.Once());执行一次.<br><br></div></body></html>