<!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!--defaultCSS-->
<title>[基础知识] MVC 介绍内容</title>





<style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style>
<style type="text/css" id="wiz_custom_css">
body
{
    font-family: Microsoft YaHei UI,"Microsoft YaHei", Georgia,Helvetica,Arial,sans-serif,宋体, PMingLiU,serif;
    font-size: 10.5pt;
    line-height: 1.5;
}
html, body
{
    
    
}
h1 {
    font-size:1.5em;
    font-weight:bold;
}
h2 {
    font-size:1.4em;
    font-weight:bold;
}
h3 {
    font-size:1.3em;
    font-weight:bold;
}
h4 {
    font-size:1.2em;
    font-weight:bold;
}
h5 {
    font-size:1.1em;
    font-weight:bold;
}
h6 {
    font-size:1.0em;
    font-weight:bold;
}
img {
    border:0;
    max-width: 100%;
    height: auto !important;
}
blockquote {
    margin-top:0px;
    margin-bottom:0px;
}
table {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
td {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
</style>

</head>

<body style="" ><div><b>MVC模式传递方式。&nbsp;</b></div><div><b>传值方式。 ViewData[] 和 ViewBag， 后者是前者的动态封装。</b></div><div><b>Html 方法的使用及自定义 拓展方法 &nbsp;</b></div><div><b><br></b></div><div><b>@* *@ //注释方式 @Razor 引擎</b></div><div><b><br></b></div><div><b>ActionResult 的几种用法， Control返回给View的方法：</b></div><div><b>--EmptyResult() ==&gt; return new EmptyResult();</b></div><div><b>--Content() ==&gt; return Content("string here"); === Response.Write("string here"). 浏览器返回字符串结果</b></div><div><b>--File()返回文件流，用于输出图片或文件提供下载 ==》&nbsp;</b></div><div><b>--HttpUnauthorizedResult() 默认返回401无权访问</b></div><div><b>--return Redirect(@"http://localhost:23521/Home/ContentResultDemo");</b></div><div><b>和-- return RedirectToAction("FileStreamResultDemo", "Home");// Home/FileStreamResultDemo &nbsp; ==&gt; Control/Action</b></div><div><b>&nbsp; --方法， 用于重定向</b></div><div><b>--Json()方法对象</b></div><div><b><br></b></div><div><b>--Url路由规则调试，</b></div><div><b><br></b></div><div><b><div>l</div><div>1.App_Start的RouteConfig.cs的路由配置规则</div><div>2.&lt;li&gt;@Html.ActionLink("这是一个连接", "Index", new { Page = 1 }, new { id = "link1"})&lt;/li&gt; 带QueryString和Html属性的Razer语法.</div><div>3.&lt;li&gt;@Html.TextBox("input1",ViewData["name"],new {@style = "width:300px;"})&lt;/li&gt;&nbsp;</div><div><br></div><div>&nbsp;&lt;li&gt;@Html.TextArea("input5","he",3,9,null)&lt;/li&gt;&nbsp;</div><div>&nbsp;&lt;li&gt;&lt;textarea cols="9" id="input5" name="input5" rows="3"&gt;he&lt;/textarea&gt;&lt;/li&gt;</div><div><br></div><div>&nbsp;.cshtml服务器端使用C#语法</div><div>&nbsp; &lt;li&gt;@Html.Raw("&lt;h1&gt;Razor&lt;/h1&gt;")&lt;/li&gt; 原生字符串</div><div>&nbsp; @*&lt;p&gt;你好，Razor 引擎&lt;/p&gt;*@ &nbsp; &nbsp;注释</div><div><br></div><div>&nbsp; Control返回各种ActionResult， View 即 Viewresult ，其他各种Result.</div><div>&nbsp; 路由规则： 访问 www.mywebsite.com/hotels/list-chengdu-100,200-3 <span class="Apple-tab-span" style="white-space:pre">	</span> &nbsp;&nbsp;</div><div>&nbsp; &nbsp; &nbsp;会访问酒店频道的列表页，并传入查询参数（price为100,200，star为3）；</div><div>　　 访问 www.mywebsite.com/hotels 下面的任何其他页面地址，都会跳转到酒店首页；</div><div>　　 ③访问 www.mywebsite.com 下面的任何地址，如果未匹配上面2条，则跳转到首页；</div><div>&nbsp; &nbsp;&nbsp;</div><div>&nbsp; &nbsp; 在ASP.Net MVC中，默认是不允许对路由规则进行调试的。但是，我们可以通过使用RouteDebug来辅助进行调试。</div><div>　　（1）首先，我们下载RouteDebug.dll到我们的项目中，并添加对其的引用。</div><div>　　（2）其次，在Global.asax中的Application_Start方法中添加一句代码：</div><div>　　 &nbsp;RouteDeug.RouteDebugger.RewriteRoutesForTesting(RouteTable.Routes);&nbsp;</div><div><br></div><div>&nbsp; 在DataAnnotations为我们所提供的众多内置验证特性中，用的最多的其中的四个是：</div><div>　　（0）[DisplayName]：显示名 – 定义表单字段的提示名称</div><div>　　（1）[Required] ：必须 – 表示这个属性是必须提供内容的字段</div><div>　　（2）[StringLength]：字符串长度 – 定义字符串类型的属性的最大长度</div><div>　　（3）[Range]：范围 – 为数字类型的属性提供最大值和最小值</div><div>　　（4）[RegularExpression]：正则表达式 – 指定动态数据中的数据字段值必须与指定的正则表达式匹配&nbsp;</div><div><br></div><div>1.3 使用DataAnnotations的注意事项</div><div>　　（1）首先，要确保需要进行校验的页面中引入了指定的几个js文件：</div><div>&lt;script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"&gt;&lt;/script&gt;</div><div>&lt;script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"&gt;&lt;/script&gt;</div><div>　　当然，jquery库的js文件也是必须的，而且在上面这两个js之前引入；</div><div>　　（2）在 Web.config 的appSettings中，已经默认支持了客户端验证（MVC3.0及更高版本中默认支持，MVC2.0则需要修改一下）：</div><div>&lt;!-- 是否启用全局客户端校验 --&gt;</div><div>&lt;add key="ClientValidationEnabled" value="true" /&gt;</div><div>&lt;add key="UnobtrusiveJavaScriptEnabled" value="true" /&gt;</div><div><br></div><div><br></div></b></div><div><br></div></body></html>