<!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!--defaultCSS-->
<title>ASP.NET 应用生命周期</title>



<style type="text/css" id="wiz_custom_css">
body
{
    font-family: Microsoft YaHei UI,"Microsoft YaHei", Georgia,Helvetica,Arial,sans-serif,宋体, PMingLiU,serif;
    font-size: 10.5pt;
    line-height: 1.5;
}
html, body
{
    
    
}
h1 {
    font-size:1.5em;
    font-weight:bold;
}
h2 {
    font-size:1.4em;
    font-weight:bold;
}
h3 {
    font-size:1.3em;
    font-weight:bold;
}
h4 {
    font-size:1.2em;
    font-weight:bold;
}
h5 {
    font-size:1.1em;
    font-weight:bold;
}
h6 {
    font-size:1.0em;
    font-weight:bold;
}
img {
    border:0;
    max-width: 100%;
    height: auto !important;
}
blockquote {
    margin-top:0px;
    margin-bottom:0px;
}
table {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
td {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
</style>

<style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style></head>

<body  style=""><div class="posttitle" style="padding: 5px 0px; color: rgb(0, 0, 102); font-family: verdana, arial, helvetica, sans-serif; font-size: 13px; line-height: normal; widows: 1;"><a id="cb_post_title_url" class="singleposttitle" href="http://www.cnblogs.com/suizhouqiwei/archive/2012/08/15/2637775.html" style="color: rgb(0, 107, 173); font-size: 22px; font-weight: bold; background-color: rgb(255, 255, 255);">ASP.NET应用程序与页面生命周期</a></div><div class="postbody" style="line-height: 1.5; color: rgb(0, 0, 102); font-family: verdana, arial, helvetica, sans-serif; font-size: 13px; widows: 1;"><div id="cnblogs_post_body" style="margin-bottom: 20px; word-break: break-word;"><p style="margin: 10px auto;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在本文中，我们将了解不同的事件，<span id="mt11" class="sentence" data-source="The life cycle of an ASP.NET application starts with a request sent by a browser to the Web server (for ASP.NET applications, typically IIS)." data-guid="e639d1635942605489d3f04f017fabae">ASP.NET 应用程序的生命周期以浏览器向 Web 服务器（对于 ASP.NET 应用程序，通常为 IIS）发送请求为起点，直至将请求结果返回至浏览器结束</span>。在这个过程中，首先我们需要了解ASP.NET请求的2个大致的步骤。其次我们将详细了解 'httphandler '，' httpmodule和 asp.net 页面对象（Page）中不同的事件的执行顺序，逻辑。</p><p style="margin: 10px auto;"><strong>二个步骤的过程：</strong></p><p style="margin: 10px auto;">asp.net请求处理，2步的过程如下所示，用户发送一个请求到IIS 服务器：</p><p style="margin: 10px auto;">1、asp.net创建一个运行时，可以处理请求。换句话说，它创建应用程序对象，请求，响应和上下文对象处理请求。</p><p style="margin: 10px auto;">2、运行时一旦被创建，请求处理，通过一系列的事件处理模块，Handler处理和页面对象。简称MHPM (Module, handler, page and Module event)。</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/842bdd1a-b970-43f8-952e-4c43b041162f.png" alt="" style="border-style: none;"></p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><strong>ASP.NET 应用程序生命周期的各个阶段：</strong></p><p style="margin: 10px auto;"><strong>步骤1：<span id="mt10" class="sentence SentenceHover" data-source="User requests an application resource from the Web server." data-guid="9a603c0d277497182fdc394d16f25491">用户从 Web 服务器请求应用程序资源&nbsp;</span></strong><span id="mt11" class="sentence" data-source="The life cycle of an ASP.NET application starts with a request sent by a browser to the Web server (for ASP.NET applications, typically IIS)." data-guid="e639d1635942605489d3f04f017fabae">ASP.NET 应用程序的生命周期以浏览器向 Web 服务器（对于 ASP.NET 应用程序，通常为 IIS）发送请求为起点。</span><span id="mt12" class="sentence" data-source="ASP.NET is an ISAPI extension under the Web server." data-guid="d1e3887644c1b6ba6918b1dc710d6e5e">ASP.NET 是 Web 服务器下的 ISAPI 扩展。</span><span id="mt13" class="sentence" data-source="When a Web server receives a request, it examines the file-name extension of the requested file, determines which ISAPI extension should handle the request, and then passes the request to the appropriate ISAPI extension." data-guid="6a113f60146790baf9d285b140ba83b2">Web 服务器接收到请求时，会对所请求的文件的文件扩展名进行检查，确定应由哪个 ISAPI 扩展处理该请求，然后将该请求传递给合适的 ISAPI 扩展。</span><span id="mt14" class="sentence" data-source="ASP.NET handles file name extensions that have been mapped to it, such as .aspx, .ascx, .ashx, and .asmx." data-guid="96ff5fb15e79cfd39c2f96fe7dbc314d">ASP.NET 处理已映射到其上的文件扩展名，如 .aspx、.ascx、.ashx 和 .asmx</span>。</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><strong>步骤2：<span id="mt21" class="sentence SentenceHover" data-source="ASP.NET receives the first request for the application." data-guid="9fe07e36a18ea41ef2da8141eb332725">ASP.NET 接收对应用程序的第一个请求&nbsp;</span></strong><span id="mt21" class="sentence SentenceHover" data-source="ASP.NET receives the first request for the application." data-guid="9fe07e36a18ea41ef2da8141eb332725">当 ASP.NET 接收到对应用程序中任何资源的第一个请求时，名为&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.hosting.applicationmanager.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">ApplicationManager</a>&nbsp;的类会创建一个应用程序域。</span><span id="mt21" class="sentence SentenceHover" data-source="ASP.NET receives the first request for the application." data-guid="9fe07e36a18ea41ef2da8141eb332725"><span id="mt23" class="sentence" data-source="Application domains provide isolation between applications for global variables and allow each application to be unloaded separately." data-guid="201ee28ed486a6f6a28e2018102c38ff">应用程序域为全局变量提供应用程序隔离，并允许单独卸载每个应用程序。</span><span id="mt24" class="sentence" data-source="Within an application domain, an instance of the class named &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HostingEnvironment&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; is created, which provides access to information about the application such as the name of the folder where the application is stored." data-guid="71b15fa47e4ac4001c67c6e50fbb3c2e">在应用程序域中，将为名为&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.hosting.hostingenvironment.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HostingEnvironment</a>&nbsp;的类创建一个实例，该实例提供对有关应用程序的信息（如存储该应用程序的文件夹的名称）的访问。</span></span></p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/6891959d-b2cf-4d5c-99f9-d0ed9cd96717.png" alt="" style="border-style: none;"></p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><strong>步骤3：<span id="mt28" class="sentence" data-source="ASP.NET core objects are created for each request." data-guid="2c55e55d113837008529a46060280bf7">为每个请求创建 ASP.NET 核心对象&nbsp;</span></strong><span id="mt28" class="sentence" data-source="ASP.NET core objects are created for each request." data-guid="2c55e55d113837008529a46060280bf7">创建了应用程序域并对&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.hosting.hostingenvironment.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HostingEnvironment</a>&nbsp;对象进行了实例化之后，ASP.NET 将创建并初始化核心对象，如<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpcontext.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpContext</a>、<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httprequest.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpRequest</a>&nbsp;和&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpresponse.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpResponse</a>。</span><span id="mt28" class="sentence" data-source="ASP.NET core objects are created for each request." data-guid="2c55e55d113837008529a46060280bf7"><span id="mt30" class="sentence" data-source="The &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpContext&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; class contains objects that are specific to the current application request, such as the &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpRequest&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; and &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpResponse&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; objects." data-guid="1e9eccccb2f11debf339fcd22b5f169b"><a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpcontext.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpContext</a>&nbsp;类包含特定于当前应用程序请求的对象，如&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httprequest.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpRequest</a>&nbsp;和&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpresponse.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpResponse</a>&nbsp;对象。</span><span id="mt31" class="sentence" data-source="The &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpRequest&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; object contains information about the current request, including cookies and browser information." data-guid="dab47d84b75e7f29cf8282f8b07b9b94"><a href="http://msdn.microsoft.com/zh-cn/library/system.web.httprequest.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpRequest</a>&nbsp;对象包含有关当前请求的信息，包括 Cookie 和浏览器信息。</span><span id="mt32" class="sentence" data-source="The &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpResponse&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; object contains the response that is sent to the client, including all rendered output and cookies." data-guid="2f065779f085181802f04f3222871d2a"><a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpresponse.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpResponse</a>&nbsp;对象包含发送到客户端的响应，包括所有呈现的输出和 Cookie。</span></span></p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">&nbsp;<strong>步骤4：<span id="mt33" class="sentence" data-source="An &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpApplication&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; object is assigned to the request" data-guid="6adc23d890f4a0ab707312a6c389b5af">将&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpapplication.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpApplication</a>&nbsp;对象分配给请求</span></strong><span id="mt33" class="sentence" data-source="An &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpApplication&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; object is assigned to the request" data-guid="6adc23d890f4a0ab707312a6c389b5af"><span id="mt34" class="sentence" data-source="After all core application objects have been initialized, the application is started by creating an instance of the &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpApplication&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; class." data-guid="473f0898adf6e87cd39f4611f88a7108">初始化所有核心应用程序对象之后，将通过创建&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpapplication.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpApplication</a>&nbsp;类的实例启动应用程序。</span><span id="mt35" class="sentence" data-source="If the application has a Global.asax file, ASP.NET instead creates an instance of the Global.asax class that is derived from the &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpApplication&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; class and uses the derived class to represent the application." data-guid="303b1a8fce57c312b0dfa728c7b3d00d">如果应用程序具有 Global.asax 文件，则 ASP.NET 会创建 Global.asax 类（从&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpapplication.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpApplication</a>&nbsp;类派生）的一个实例，并使用该派生类表示应用程序</span></span><span id="mt2" class="sentence" data-source="This class is the base class for applications that are defined by the user in the Global.asax file." data-guid="7622373803c5bea4b4662445d92b04cd">。</span></p><p style="margin: 10px auto;">&nbsp;<strong>注</strong>：<span class="mtps-cell"><span id="mt36" class="sentence" data-source="The first time an ASP.NET page or process is requested in an application, a new instance of &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpApplication&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; is created." data-guid="2f259bce31f998868df3b83ad01b7778">第一次在应用程序中请求 ASP.NET 页或进程时，将创建&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpapplication.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpApplication</a>&nbsp;的一个新实例。</span><span id="mt37" class="sentence" data-source="However, to maximize performance, &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpApplication&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; instances might be reused for multiple requests." data-guid="abb9d7fdf05828fda39d6417a1c2c1d9">不过，为了尽可能提高性能，可对多个请求重复使用&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpapplication.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpApplication</a>&nbsp;实例。</span></span></p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/0a1f5af6-007a-4eb5-bf37-afcd39e0f8c3.png" alt="" style="border-style: none;"></p><p style="margin: 10px auto;">&nbsp;<br><br><strong>步骤5：</strong>&nbsp;<span id="mt42" class="sentence" data-source="The request is processed by the &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpApplication&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; pipeline." data-guid="85c644465ca255f10b2b21d8615ad419">由&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpapplication.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpApplication</a>&nbsp;管线处理请求 MHPM (Module, handler, page and Module event)</span><span id="mt42" class="sentence" data-source="The request is processed by the &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpApplication&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; pipeline." data-guid="85c644465ca255f10b2b21d8615ad419">。</span></p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/c634d7a1-df94-4f1e-9dcc-408433a3da51.png" alt="" width="1040" height="733" style="border-style: none;"></p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/5b998219-770f-4f33-b9b3-689b3b7a632a.png" alt="" style="border-style: none;"></p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><strong>使用MHPM (Module, handler, page and Module event) 事件处理请求&nbsp;<br></strong>一旦&nbsp;<code>HttpApplication对象创建，<span id="mt43" class="sentence" data-source="The following events are executed by the &lt;span&gt;&lt;span class=&quot;mtpsTagOuterHtml&quot; &gt;&lt;span&gt;HttpApplication&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; class while the request is processed." data-guid="b0d256df234011acc1d1feeb566094ce">在处理该请求时将由&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.httpapplication.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">HttpApplication</a>&nbsp;类执行</span>。我们来了解下<code>HttpModule&nbsp;</code><code>HttpHandlers。</code></code></p><p style="margin: 10px auto;">1、如果你想通过*.aspx，*.html文件来处理程序逻辑，那么你需要使用<code>HttpHandler,换句话说，<code>httphandler</code>是一个扩展的处理器。</code></p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/eb79c52a-ebcb-491a-8635-0df7bd1176e2.png" alt="" style="border-style: none;"></p><p style="margin: 10px auto;">2、如果你想使用ASP.NET管道来处理程序逻辑，你需要使用<code>HttpModule 换句话说，<code>httpmodule</code>是一个事件处理器。</code></p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/3face846-cc49-42da-b794-d1ceb2a3deb3.png" alt="" style="border-style: none;"></p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">如何处理请求。mhpm有4个重要的步骤：</p><p style="margin: 10px auto;"><strong>步骤1（M: HttpModule）：</strong>客户端开始请求处理。在asp.net引擎和<code>httpmodule中</code>的事件可以用来处理用户自己定义的逻辑。有6个重要的事件，你可以在你的页面对象被创建之前调用<code>Begin Request</code>，<code>authenticaterequest</code>，<code>authorizerequest</code>，<code>resolverequestcache</code>，<code>acquirerequeststate</code>与<code>prerequesthandlerexecute</code>。</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><strong>步骤2（H: ‘HttpHandler’）：</strong>一旦上述6个事件被执行完，asp.net引擎调用processrequest事件，如果已实现httphandler在您的项目。</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><strong>步骤3（P: ASP.NET page）：</strong>一旦<code>httphandler</code>执行，asp.net页面对象被创建。而asp.net页面对象被创建，Page对象的事件将被调用，这可以帮助我们页面中定制自定义逻辑的处理。有6个重要的事件，<code>Init</code>,&nbsp;<code>Load</code>,&nbsp;<code>validate</code>,&nbsp;<code>event</code>,&nbsp;<code>render</code>&nbsp;,<code>unload 简称&nbsp;<code>SILVER&nbsp;&nbsp;&nbsp;S – Start (does not signify anything as such just forms the word) , I – (Init) , L (Load) , V (Validate), E (Event) and R (Render)。</code></code><br><br><strong><strong>步骤4</strong>（M: HttpModule）：</strong>一旦页面对象是执行和从内存中卸载，<code>httpmodule</code>提供网页执行事件可以用来注入自定义处理逻辑。有4个重要的后处理事件<code>postrequesthandlerexecute</code>，<code>releaserequeststate</code>，<code>updaterequestcache</code>与<code>endrequest</code>。</p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/2cb09ffb-ca92-48f9-af30-a20d40e915d4.png" alt="" style="border-style: none;"></p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><strong>&nbsp;</strong></p><p style="margin: 10px auto;"><strong>&nbsp;事件详细介绍：</strong></p><table class="ArticleTable" style="border-color: silver; word-break: break-word; width: 640px;"><caption>&nbsp;</caption><thead><tr><td style="border-color: silver; padding: 3px;"><strong><span style="font-size: 12px;">部分</span></strong></td><td style="border-color: silver; padding: 3px;"><strong><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Event</span>事件</span></strong></td><td style="border-color: silver; padding: 3px;"><strong><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Description</span>描述</span></strong></td></tr></thead><tbody><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpModule</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>BeginRequest</code></span></td><td style="border-color: silver; padding: 3px;"><span id="mt1" class="sentence" data-source="Occurs as the first event in the HTTP pipeline chain of execution when ASP.NET responds to a request." data-guid="d8bdb89556adf22858541539c9af04eb" style="font-size: 12px;">在 ASP.NET 响应请求时作为 HTTP 执行管线链中的第一个事件发生。<span class="selflink">BeginRequest</span>&nbsp;事件发出信号表示创建任何给定的新请求。<span id="mt3" class="sentence" data-source="This event is always raised and is always the first event to occur during the processing of a request." data-guid="f67623927e0f392b28865af1b6769569">此事件始终被引发，并且始终是请求处理期间发生的第一个事件。</span></span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpModule</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>AuthenticateRequest</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span id="mt1" class="sentence SentenceHover" data-source="Occurs when a security module has established the identity of the user." data-guid="037e187c9e289bc4df143815764de44f">当安全模块已建立用户标识时发生。<span class="selflink">AuthenticateRequest</span>&nbsp;事件发出信号表示配置的身份验证机制已对当前请求进行了身份验证。</span></span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpModule</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>AuthorizeRequest</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">安全模块已验证用户授权时发生。<span class="selflink">AuthorizeRequest</span>&nbsp;事件发出信号表示 ASP.NET 已对当前请求进行了授权。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpModule</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>ResolveRequestCache</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span id="mt1" class="sentence SentenceHover" data-source="Occurs when ASP.NET finishes an authorization event to let the caching modules serve requests from the cache, bypassing execution of the event handler (for example, a page or an XML Web service)." data-guid="9f37e2c9f36c13c888ebd1639b833f66">在 ASP.NET 完成授权事件以使缓存模块从缓存中为请求提供服务后发生，从而绕过事件处理程序（例如某个页或 XML Web services）的执行。</span></span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpModule</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>AcquireRequestState</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span id="mt1" class="sentence" data-source="Occurs when ASP.NET acquires the current state (for example, session state) that is associated with the current request." data-guid="301a388a9c7b2615f3a86fde906e9c39">当 ASP.NET 获取与当前请求关联的当前状态（如会话状态）时发生。<span class="selflink">AcquireRequestState</span>&nbsp;事件在创建了事件处理程序之后引发。</span></span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpModule</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>PreRequestHandlerExecute</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span id="mt1" class="sentence" data-source="Occurs just before ASP.NET starts executing an event handler (for example, a page or an XML Web service)." data-guid="630e831991a6a0917dd9d90ea185e593">恰好在 ASP.NET 开始执行事件处理程序（例如，某页或某个 XML Web services）前发生。</span></span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpHandler</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>ProcessRequest</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>Httphandler</code>逻辑被执行。&nbsp;在本节中，我们会写，需要将每页扩展执行的逻辑。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>Page</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>Init</code></span></td><td style="border-color: silver; padding: 3px;"><p style="margin: 10px auto;"><span style="font-size: 12px;"><span class="selflink">OnInit</span>&nbsp;方法执行创建&nbsp;<a href="http://msdn.microsoft.com/zh-cn/library/system.web.ui.page.aspx" style="color: rgb(0, 107, 173); text-decoration: none;">Page</a>&nbsp;实例所需的初始化和设置步骤。<span id="mt4" class="sentence" data-source="In this stage of the page's life cycle, declared server controls on the page are initialized to their default state; however, the view state of each control is not yet populated." data-guid="d78698fbb70d3e4ddd608dbbd1db3b4e">在页生命周期的此阶段中，页中声明的服务器控件都已初始化为默认状态；但每个控件的视图状态尚未填充。</span><span id="mt5" class="sentence" data-source="A control on the page cannot access other server controls on the page during the &lt;span&gt;&lt;span class=&quot;input&quot;&gt;Page_Init&lt;/span&gt;&lt;/span&gt; phase, regardless of whether the other controls are child or parent controls." data-guid="38a63102805c00854156e82b6502cc68">在&nbsp;<span class="input">Page_Init</span>&nbsp;阶段中，页中的控件不能访问该页的其他服务器控件，无论其他控件是子控件还是父控件。</span><span id="mt6" class="sentence" data-source="Other server controls are not guaranteed to be created and ready for access." data-guid="d4ab54b0839ceb944349f82b91b55f7d">不一定会创建其他服务器控件，也不一定能够访问它们</span></span></p></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>Page</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>Load</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">ASP.NET控件完成加载，你写的UI操作逻辑或任何其他逻辑在这里。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>Page</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>Validate</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">如果你有你的页面上有验证逻辑，这里检查是否符合验证。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">&nbsp;</span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>Render</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">将页面最终的输出发送到浏览器，如果你想做出一些最终的HTML的变化，这是输出到浏览器，你可以在这里输入你的HTML的逻辑。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>Page</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>Unload</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">页面对象从内存中卸载。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpModule</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>PostRequestHandlerExecute</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span id="mt1" class="sentence" data-source="Occurs when the ASP.NET event handler (for example, a page or an XML Web service) finishes execution." data-guid="39257b38c3c50a4d94c4d30c686aaefd">在 ASP.NET 事件处理程序（例如，某页或某个 XML Web service）执行完毕时发生。</span></span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpModule</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>ReleaserequestState</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span id="mt1" class="sentence" data-source="Occurs after ASP.NET finishes executing all request event handlers." data-guid="6b50b8e6e33c786cb55da1e3cd70e2db">在 ASP.NET 执行完所有请求事件处理程序后发生。</span><span id="mt2" class="sentence" data-source="This event causes state modules to save the current state data." data-guid="62a5cb07875be56c988ea35ad164729c">该事件将使状态模块保存当前状态数据。<span id="mt3" class="sentence" data-source="When the &lt;span&gt;&lt;span class=&quot;selflink&quot;&gt;ReleaseRequestState&lt;/span&gt;&lt;/span&gt; event is raised, the application is finished with the request and ASP.NET is signaled to store the request state." data-guid="c9d4b9283b2730849f0e239408395b2f">引发<span class="selflink">ReleaseRequestState</span>&nbsp;事件以后，应用程序以该请求结束，并发出 ASP.NET 信号以存储该请求状态。</span></span></span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpModule</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>UpdateRequestCache</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Before you end, if you want to update your cache.</span>结束之前，如果您想更新您的高速缓存。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>HttpModule</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><code>EndRequest</code></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span id="mt1" class="sentence" data-source="Occurs when ASP.NET finishes executing an event handler in order to let caching modules store responses that will be used to serve subsequent requests from the cache." data-guid="2b3a0bc2dbb5a47e099180b06ee590e0">当 ASP.NET 执行完事件处理程序以使缓存模块存储将用于从缓存为后续请求提供服务的响应时发生。</span></span></td></tr></tbody></table><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><strong>演示代码：</strong></p><p style="margin: 10px auto;">&nbsp;&nbsp;在这段代码中，我们创建HttpModule 和Httphandler&nbsp; 添加所有请求响应的事件， 下面用 HttpModule Httphandler&nbsp; 跟踪所有活动，并把它添加到一个全局性的集合变量中。</p><p style="margin: 10px auto;">&nbsp;</p><div class="cnblogs_code" style="border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);"><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="padding-right: 5px; line-height: 1.5 !important;"><a href="" title="复制代码" style="color: rgb(0, 107, 173); text-decoration: none; border: none !important;"><img src="ASP.NET 应用生命周期_files/acfb7236-c9d8-4d0a-a0a7-6f8377e5464b.gif" alt="复制代码" style="border-style: none !important;"></a></span></div><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;"><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 1</span>  <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">public</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">class</span><span style="line-height: 1.5 !important;"> clsHttpModule : IHttpModule
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 2</span> <span style="line-height: 1.5 !important;">    {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 3</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">private</span><span style="line-height: 1.5 !important;"> HttpApplication httpApp;
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 4</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">public</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">static</span> ArrayList objArrayList = <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> ArrayList();
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 5</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">public</span><span style="line-height: 1.5 !important;"> clsHttpModule()
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 6</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 7</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 8</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 9</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">10</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">11</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">public</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span><span style="line-height: 1.5 !important;"> Dispose()
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">12</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">13</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">14</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">15</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">16</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">public</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span><span style="line-height: 1.5 !important;"> Init(HttpApplication context)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">17</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">18</span>             <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">this</span>.httpApp =<span style="line-height: 1.5 !important;"> context;
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">19</span> <span style="line-height: 1.5 !important;">            httpApp.Context.Response.Clear();
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">20</span> <span style="line-height: 1.5 !important;">            objArrayList.Clear();
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">21</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:Init</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">22</span>             httpApp.AuthenticateRequest += <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> EventHandler(OnAuthentication);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">23</span>             httpApp.AuthorizeRequest += <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> EventHandler(OnAuthorization);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">24</span>             httpApp.BeginRequest += <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> EventHandler(OnBeginrequest);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">25</span>             httpApp.EndRequest += <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> EventHandler(OnEndRequest);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">26</span>             httpApp.ResolveRequestCache += <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> EventHandler(OnResolveRequestCache);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">27</span>             httpApp.AcquireRequestState += <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> EventHandler(OnAcquireRequestState);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">28</span>             httpApp.PreRequestHandlerExecute += <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> EventHandler(OnPreRequestHandlerExecute);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">29</span>             httpApp.PostRequestHandlerExecute += <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> EventHandler(OnPostRequestHandlerExecute);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">30</span>             httpApp.ReleaseRequestState += <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> EventHandler(OnReleaseRequestState);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">31</span>             httpApp.UpdateRequestCache += <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="line-height: 1.5 !important;"> EventHandler(OnUpdateRequestCache);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">32</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">33</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> OnUpdateRequestCache(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs a)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">34</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">35</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:OnUpdateRequestCache</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">36</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">37</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> OnReleaseRequestState(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs a)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">38</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">39</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:OnReleaseRequestState</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">40</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">41</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> OnPostRequestHandlerExecute(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs a)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">42</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">43</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:OnPostRequestHandlerExecute</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">44</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">45</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> OnPreRequestHandlerExecute(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs a)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">46</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">47</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:OnPreRequestHandlerExecute</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">48</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">49</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> OnAcquireRequestState(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs a)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">50</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">51</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:OnAcquireRequestState</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">52</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">53</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> OnResolveRequestCache(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs a)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">54</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">55</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:OnResolveRequestCache</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">56</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">57</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> OnAuthorization(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs a)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">58</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">59</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:OnAuthorization</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">60</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">61</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> OnAuthentication(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs a)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">62</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">63</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">64</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:AuthenticateRequest</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">65</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">66</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> OnBeginrequest(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs a)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">67</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">68</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">69</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:BeginRequest</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">70</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">71</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> OnEndRequest(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs a)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">72</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">73</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">httpModule:EndRequest</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">74</span>             objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">&lt;hr&gt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">75</span>             <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">foreach</span> (<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">string</span> str <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">in</span><span style="line-height: 1.5 !important;"> objArrayList)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">76</span> <span style="line-height: 1.5 !important;">            {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">77</span>                 httpApp.Context.Response.Write(str + <span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">&lt;br&gt;</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">78</span> <span style="line-height: 1.5 !important;">            }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">79</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">80</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">81</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">82</span>     }</pre><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="padding-right: 5px; line-height: 1.5 !important;"><a href="" title="复制代码" style="color: rgb(0, 107, 173); text-decoration: none; border: none !important;"><img src="ASP.NET 应用生命周期_files/acfb7236-c9d8-4d0a-a0a7-6f8377e5464b.gif" alt="复制代码" style="border-style: none !important;"></a></span></div></div><p style="margin: 10px auto;">以下代码片段是跟踪&nbsp;<code>HttpHandler</code>&nbsp;的<code>ProcessRequest</code>&nbsp;'事件' ：</p><div class="cnblogs_code" style="border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);"><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="padding-right: 5px; line-height: 1.5 !important;"><a href="" title="复制代码" style="color: rgb(0, 107, 173); text-decoration: none; border: none !important;"><img src="ASP.NET 应用生命周期_files/acfb7236-c9d8-4d0a-a0a7-6f8377e5464b.gif" alt="复制代码" style="border-style: none !important;"></a></span></div><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;"><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 1</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">public</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">class</span><span style="line-height: 1.5 !important;"> clsHttpHandler : IHttpHandler
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 2</span> <span style="line-height: 1.5 !important;">    {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 3</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 4</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">public</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">bool</span><span style="line-height: 1.5 !important;"> IsReusable
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 5</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 6</span>             <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">get</span> { <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">return</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">true</span><span style="line-height: 1.5 !important;">; }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 7</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 8</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 9</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">public</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span><span style="line-height: 1.5 !important;"> ProcessRequest(HttpContext context)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">10</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">11</span>             clsHttpModule.objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">HttpHandler:ProcessRequest</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">12</span>             context.Response.Redirect(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">~/Default.aspx</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">13</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">14</span>     }</pre><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="padding-right: 5px; line-height: 1.5 !important;"><a href="" title="复制代码" style="color: rgb(0, 107, 173); text-decoration: none; border: none !important;"><img src="ASP.NET 应用生命周期_files/acfb7236-c9d8-4d0a-a0a7-6f8377e5464b.gif" alt="复制代码" style="border-style: none !important;"></a></span></div></div><p style="margin: 10px auto;">页面Page事件</p><div class="cnblogs_code" style="border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);"><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="padding-right: 5px; line-height: 1.5 !important;"><a href="" title="复制代码" style="color: rgb(0, 107, 173); text-decoration: none; border: none !important;"><img src="ASP.NET 应用生命周期_files/acfb7236-c9d8-4d0a-a0a7-6f8377e5464b.gif" alt="复制代码" style="border-style: none !important;"></a></span></div><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;"><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 1</span>  <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">public</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">partial</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">class</span><span style="line-height: 1.5 !important;"> _Default : System.Web.UI.Page
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 2</span> <span style="line-height: 1.5 !important;">    {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 3</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">protected</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> Page_init(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs e)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 4</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 5</span>             clsHttpModule.objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">Page:Init</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 6</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 7</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">protected</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> Page_Load(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs e)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 8</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;"> 9</span>             clsHttpModule.objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">Page:Load</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">10</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">11</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">public</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">override</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span><span style="line-height: 1.5 !important;"> Validate()
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">12</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">13</span>             clsHttpModule.objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">Page:Validate</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">14</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">15</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">protected</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> Button1_Click(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs e)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">16</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">17</span>             clsHttpModule.objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">Page:Event</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">18</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">19</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">protected</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">override</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span><span style="line-height: 1.5 !important;"> Render(HtmlTextWriter output)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">20</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">21</span>             clsHttpModule.objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">Page:Render</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">22</span>             <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">base</span><span style="line-height: 1.5 !important;">.Render(output);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">23</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">24</span>         <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">protected</span> <span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">void</span> Page_Unload(<span style="color: rgb(0, 0, 255); line-height: 1.5 !important;">object</span><span style="line-height: 1.5 !important;"> sender, EventArgs e)
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">25</span> <span style="line-height: 1.5 !important;">        {
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">26</span>             clsHttpModule.objArrayList.Add(<span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">Page:UnLoad</span><span style="color: rgb(128, 0, 0); line-height: 1.5 !important;">"</span><span style="line-height: 1.5 !important;">);
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">27</span> <span style="line-height: 1.5 !important;">        }
</span><span style="color: rgb(0, 128, 128); line-height: 1.5 !important;">28</span>     }</pre><div class="cnblogs_code_toolbar" style="margin-top: 5px;"><span class="cnblogs_code_copy" style="padding-right: 5px; line-height: 1.5 !important;"><a href="" title="复制代码" style="color: rgb(0, 107, 173); text-decoration: none; border: none !important;"><img src="ASP.NET 应用生命周期_files/acfb7236-c9d8-4d0a-a0a7-6f8377e5464b.gif" alt="复制代码" style="border-style: none !important;"></a></span></div></div><p style="margin: 10px auto;">&nbsp;webconfig中配置：</p><div class="cnblogs_code" style="border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);"><img id="code_img_closed_eda258d1-22cd-4ed7-afe2-9f05b6b3f8cb" class="code_img_closed" src="ASP.NET 应用生命周期_files/292dd4f4-6424-4e13-a5ea-1ff22cd829ef.gif" alt="" style="border-style: none; vertical-align: middle; padding-right: 5px;"><span class="cnblogs_code_collapse" style="border: 1px solid gray; padding: 2px; background-color: rgb(255, 255, 255); line-height: 1.5 !important;">HttpModules配置</span></div><p style="margin: 10px auto;">页面第一次加载效果：</p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/a5deb0f2-398d-4bf3-a30b-af1dae2e6f11.jpg" alt="" style="border-style: none; width: 1079px;"></p><p style="margin: 10px auto;">点击button按钮后：</p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/16b7afcd-fc9c-4d68-9066-98360eba4a62.jpg" alt="" style="border-style: none;"></p><p style="margin: 10px auto;"><strong>HttpModule</strong></p><p style="margin: 10px auto;">HttpModule通过在某些事件中注册，把自己插入ASP.NET请求处理管道。当这些事件发生的时候，ASP.NET调用对相应的HTTP模块，这样该模块就能处理请求了。</p><p style="margin: 10px auto;">常用操作：</p><p style="margin: 10px auto;">1、向每个页面动态添加一些备注或说明性的文字：<br>2、判断用户登录</p><p style="margin: 10px auto;">如果定义了多个HttpModule，在web.config文件中引入自定义HttpModule的顺序就决定了多个自定义HttpModule在处理一个HTTP请求的接管顺序。</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><strong>HttpHandler</strong><br>HttpHandler是HTTP请求的处理中心，真正地对客户端请求的服务器页面做出编译和执行，并将处理过后的信息附加在HTTP请求信息流中再次返回到HttpModule中。<br>HttpHandler与HttpModule不同，一旦定义了自己的HttpHandler类，那么它对系统的HttpHandler的关系将是“覆盖”关系。</p><p style="margin: 10px auto;">为了验证请求是否进入HttpHandler ，我们可以在WebConfig中 加入：</p><p style="margin: 10px auto;">&lt;add verb="*" path="*.aspx" type="WebDemo1.Common.clsHttpHandler,WebDemo1"/&gt;</p><p style="margin: 10px auto;">调试程序看看。</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">综上我们可以总计出一张图：</p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/e14d445a-18f6-4636-aaca-95af8e4f648e.png" alt="" style="border-style: none;"></p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><strong>ASP.NET页面事件</strong></p><p style="margin: 10px auto;">&nbsp;&nbsp;&nbsp;&nbsp; 在上面的部分，我们已经看到了一个ASP.NET页面完整的请求事件。 最重要的部分之一，是ASP.NET页面，我们没有详细讨论相同。我们详细讨论下ASP.NET的页面事件。任何ASP.NET页面中有2个部分 如图：</p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/d1bc1994-1df3-4cff-8b82-3b419f5abde9.jpg" alt="" style="border-style: none;"></p><p style="margin: 10px auto;"><strong>注意</strong>&nbsp;：大部分的开发者直接使用<code>page_load</code>方法的一切，这不是一个好的做法。例如 填充控件，设置视图状态，应用主题等，这些都是发生在页面上的负荷。因此，我们可以在适当的事件，添加适当的逻辑，这将真正使你的代码整洁 符合逻辑。</p><table class="ArticleTable" style="border-color: silver; word-break: break-word;"><caption>&nbsp;</caption><thead><tr style="width: 740px; background-color: rgb(8, 98, 246);"><td style="border-color: silver; padding: 3px;"><strong><span style="font-size: 12px;">序号</span></strong></td><td style="border-color: silver; padding: 3px;"><strong><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">事件</span></span></strong></td><td width="69" style="border-color: silver; padding: 3px;"><strong><span style="font-size: 12px;">&nbsp;控件初始化</span></strong></td><td style="border-color: silver; padding: 3px;"><strong><span style="font-size: 12px;">状态 是否</span></strong><br><strong><span style="font-size: 12px;">可用</span></strong></td><td style="border-color: silver; padding: 3px;"><strong><span style="font-size: 12px;">表单数据是否</span></strong><br><strong><span style="font-size: 12px;">可用</span></strong></td><td style="border-color: silver; padding: 3px;"><strong><span style="font-size: 12px;">什么逻辑可以写在这里？</span></strong></td></tr></thead><tbody><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">1</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Init</span></span></td><td width="69" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">No</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">No</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">No</span></span></td><td style="border-color: silver; padding: 3px;"><p style="margin: 10px auto;"><span style="font-size: 12px;"><span id="mt4" class="sentence SentenceHover" data-source="In this stage of the page's life cycle, declared server controls on the page are initialized to their default state; however, the view state of each control is not yet populated." data-guid="d78698fbb70d3e4ddd608dbbd1db3b4e"><span class="selflink">OnInit</span>&nbsp;方法执行创建&nbsp;Page 实例所需的初始化和设置步骤。<span id="mt4" class="sentence" data-source="In this stage of the page's life cycle, declared server controls on the page are initialized to their default state; however, the view state of each control is not yet populated." data-guid="d78698fbb70d3e4ddd608dbbd1db3b4e">在页生命周期的此阶段中，页中声明的服务器控件都已初始化为默认状态；但每个控件的视图状态尚未填充。</span><span id="mt5" class="sentence" data-source="A control on the page cannot access other server controls on the page during the &lt;span&gt;&lt;span class=&quot;input&quot;&gt;Page_Init&lt;/span&gt;&lt;/span&gt; phase, regardless of whether the other controls are child or parent controls." data-guid="38a63102805c00854156e82b6502cc68">在&nbsp;<span class="input">Page_Init</span>&nbsp;阶段中，页中的控件不能访问该页的其他服务器控件，无论其他控件是子控件还是父控件。</span><span id="mt6" class="sentence" data-source="Other server controls are not guaranteed to be created and ready for access." data-guid="d4ab54b0839ceb944349f82b91b55f7d">不一定会创建其他服务器控件，也不一定能够访问它们。</span></span></span></p></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">2</span>&nbsp;</span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Load view state</span></span></td><td width="69" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Not guaranteed</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Not guaranteed</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">您可以访问视图状态和任何同步逻辑</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">3</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">PostBackdata</span></td><td width="69" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Not guaranteed</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">&nbsp;你可以访问表单数据。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">4</span>&nbsp;</span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Load</span></span></td><td width="69" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;">绑定控件 等等。。。</td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">5</span>&nbsp;</span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Validate</span></span></td><td width="69" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">如果你的页面有验证，或者你想为您的网页执行验证。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">6</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Event</span></span></td><td width="69" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">如果这是通过点击一个按钮或下拉的变化，那么相对应的事件将被执行。</span></td></tr><tr><td height="25" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">7</span>&nbsp;</span></td><td height="25" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Pre-render</span></span></td><td width="69" height="25" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td height="25" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td height="25" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td height="25" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">如果你想在这些控件视图状态最后保存之前修改UI对象的结构或属性值。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">8</span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Save view state</span></span></td><td width="69" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">一旦所有服务器控件的变化完成，这一事件控制数据保存在视图状态。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">9</span>&nbsp;</span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Render</span></span></td><td width="69" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;">如果你想添加一些自定义的HTML输出。</span></td></tr><tr><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">10</span>&nbsp;</span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Unload</span></span></td><td width="69" style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><span style="font-size: 12px;"><span class="google-src-text" style="direction: ltr;">Yes</span></span></td><td style="border-color: silver; padding: 3px;"><p style="margin: 10px auto;"><span style="font-size: 12px;">你可以在这里做任何清理。</span></p><p style="margin: 10px auto;">&nbsp;</p></td></tr></tbody></table><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;">&nbsp;</p><p style="margin: 10px auto;"><img src="ASP.NET 应用生命周期_files/af28607f-3937-4044-8ae9-9f072cab888b.jpg" alt="" style="border-style: none;"></p><p style="margin: 10px auto;">&nbsp;</p><br><div style="color:gray"><small>来源：&nbsp;&lt;<a href="http://www.cnblogs.com/suizhouqiwei/archive/2012/08/15/2637775.html">http://www.cnblogs.com/suizhouqiwei/archive/2012/08/15/2637775.html</a><small>&gt;</small></small></div><small><small>&nbsp;</small></small></div></div></body></html>