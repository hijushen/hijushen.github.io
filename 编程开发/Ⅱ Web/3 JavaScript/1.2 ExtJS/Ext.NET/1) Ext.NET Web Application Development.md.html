<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>1) Ext.NET Web Application Development.md</title>
<style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style></head>
<body  style=""><!--WizHtmlContentBegin--><div> [toc]</div><div>&nbsp;</div><div>## Ajax with Ext.NET</div><div>### 传统的Asp.Net方式</div><div>-&nbsp; 传统的 `UpdatePanel` 模式, 回传真个页面数据(缺点!)</div><div>-&nbsp; 使用 `PageMethod` 方式完成Ajax调用, 返回JSON数据较少, 再由Js处理. </div><div>&nbsp;&nbsp;&nbsp; -&nbsp; 页面中&nbsp; `&lt;asp:ScriptManager ID="ScriptManager1" EnablePageMethods="true" runat="server" /&gt;`&nbsp; 参数要允许</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; 方法用 `[WebMethod]` 完成 注解 方法, 方法就可以使用.</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; 调用路径: 控件使用 -&gt; Js模块使用 -&gt; 方法使用.</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp; 拓展: 引用WebServices同样, 但是要引入Services路径.</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; 使用回调: 方法签名(), 调用时使用 `(onSuccess,OnError)` 回调的方式可以:&nbsp; `OnSuccess(response), OnError(error)` 等方式.</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; `asp.net` 控件如 `&lt;asp:Button runat="server " OnclientCLick="return GetDateFromServer()"&gt;`&nbsp;&nbsp;&nbsp;&nbsp; 其中方法返回 `false` 表示不再往server传递(具体例子待议).</div><div>&nbsp;</div><div>&nbsp;</div><div>### Events in Ext.Net</div><div>-&nbsp; Listeners - client-side events</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; 执行预定义函数回调， 参数使用 `Fn` ; 否则执行函数语句使用 `Handler=..`</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; 根据Ext 控件ID访问控件使用&nbsp; `#{ButtonA}`&nbsp; 方式。客户端事件模型中可以使用。</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; 自定义属性`&lt;CustonConfig&gt;&lt;ext:ConfigItem Name="whoAmI" Value="Button b" Mode = "Value" /&gt;&lt;/CustomConfig&gt;. 也可以直接在定义时直接使用，可以自动生成。 mode: Auto, Raw, Value类型。产生的属性使用其值： Raw无引号。Value有。 </div><div>-&nbsp; DirectEvents on Ext.NET Controls.</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; 二者都可以使用:&nbsp; `&lt;Ext:Button onDirectClick =...&gt;` 的方法是&nbsp; `&lt;Ext:Button&gt;&lt;DirectEvents&gt;&lt;Click OnEvent="" /&gt;&lt;/DirectEvents&gt;`&nbsp; 的简写形式.</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; 后台方法直接调用修改前台Ext.NET控件值及属性.</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; 前台附加参数, 使用非简写形式下增加 `&lt;ExtraParams&gt;` 标签, 后台可以直接使用传递的参数, 使用 `&lt;X.Msg.Alert&gt;` 的方式显示窗体等.</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; `DirectEventArgs` ,后台方法事件, 也可以使用&nbsp; `EventArgs` . 还有其他有用的属性:&nbsp; `ExtraParamsResponse` .&nbsp; `Success``ErrorMessage` 属性, 属性为false及对应错误内容;&nbsp; `Name``Token ` 用于 `MessageBus` .</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; `&lt;EventMask&gt;` 设定, 设定Target = "CustomTarget" 和 CustomTarget属性为自定义控件, 完成缓冲等待图标设置.</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; `#{}`&nbsp; 转换 Ext.NET control 为实际值.</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; `&lt;Confirmation ConfirmRequest="true" Title =... Message=... /&gt;`&nbsp; 的方式完成提交前确认的动作.</div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; MessageBus， Ext.NET2 引入新功能。</div><div>&nbsp;</div><div>-&nbsp; DirectEvent on HTML/ASP.NET Controls</div><div>&nbsp;&nbsp;&nbsp; -&nbsp; `&lt;CustomDirectEvents&gt;` `&lt;ext&gt;` 增加使用</div><div>-&nbsp; DirectEvents dynamically generating new Ext.NET Components</div><div>&nbsp;&nbsp;&nbsp; - 方法中`new Window(...).Render();`的方式返回一个窗体, chrome里面显示是&nbsp; Js参数,Ｅｘｔ．Ｊｓ生成相应Window代码/</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - AddTo() 方法增加至已有控件中. SetActiveTab()等.</div><div>&nbsp;</div><div>- DirectEvents invoking web services.</div><div>&nbsp;&nbsp;&nbsp; - `return new DirectResponse()` 和 MVC 模式下`this.Direct()`. 解释是返回这个参数后, 可以更好的配合 客户端proxy工作.&nbsp;&nbsp; 方法为void时可以返回, 返回签名为DirectResponse时也可以返回, 注意使用</div><div>&nbsp;&nbsp;&nbsp; - `Click Url="" Type=""(Load,Submit) Method="POST"&gt;`&nbsp;&nbsp;&nbsp; </div><div>&nbsp;&nbsp;&nbsp; - DirectEvent 下 Click 参数 之 Url参数, Type:Load 只提交ExtraParams 定义, 如果是 Submit, 则提交HTML表单.</div><div>&nbsp;&nbsp;&nbsp; - Get方式,同ASP.NET. 获得数据, 允许后台方法这种方式才有反馈.</div><div>&nbsp;</div><div>- 总结: DirectEvents 增加到Ext.NET 控件, 当被调用相应服务端方法. DirectEvents需要作为页面生命周期在服务端重新创建.</div><div>- DireceMethod, 不需要在服务端创建一个控件实例. 也不需要一个全生命周期.</div><div>&nbsp;</div><div>### DirectMethod</div><div>- 客户端调用代理模式调用. RPC-style.</div><div>- 命名空间更改：webconfig, &lt;ext:Resource .../&gt;标签, 方法[DirectMethod(Namespace="...")]等.</div><div>- 使用onSuccess等回调可以看出执行过程.</div><div>- 对方法, 定义主机 async= false 可以同步方法</div><div>- 服务端静态方法提高性能, 返回string. 然后在界面js端完成控件值的设置: `App.Label1.setText(result)`的方式, 减少文本界面传递.</div><div>- 利用failure , onSuccess 等异步处理回调.</div><div>- 服务端异常友好化处理: `ResourceManager.AjaxSuccess = false; ResourceManager.AjaxErrorMessage = GetFriendlyMessage()`等方式</div><div><br></div><!--WizHtmlContentEnd--></body></html>