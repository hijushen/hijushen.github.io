<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Ext.NET界面样式[3 FormPanel].md</title>
<style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style></head>
<body  style=""><!--WizHtmlContentBegin--><div>[toc]</div><div>&nbsp;</div><div>## `FormPanel`</div><div>### 行内属性设置</div><div>- `&lt;ext:FormPanel ID="" ruant="" Layout="" Border="" ButtonAlign=""&gt;`</div><div>&nbsp;</div><div>### 成员属性设置</div><div>- `&lt;Default&gt;` 设置: `&lt;ext:Parameter Name="" Value="" /&gt;` 内容包括`columnWidth,labelWidth,lableAlign margin`</div><div>- `&lt;Items&gt;`成员.</div><div>&nbsp;</div><div>### 成员方法 [API]</div><div>1. `queryBy`: `Panel` 使用 `queryBy` 方法筛选元素. 示例: `App.ValueAddedTaxPanel.queryBy(function (item)`</div><div>2. `findRecordByValue` &amp;&amp; `setSelectedItems`: `combobox` 类型通过`value` 找对应的record记录 并设置. 示例: `var record = comb.findRecordByValue(value)`, 返回的 `record` 可以用来选择对应元素 `comb.setSelectedItems(record)`.</div><div>3. `Ext.Array.each(combs, function(item){})`. Ext数组遍历方法, 可以用来对数组遍历处理.</div><div>4. `getForm()` &amp;&amp; `isValid()`: `Panel`获取Form值内容及是否通过相应有效性验证. 示例: `App.ValueAddedTaxPanel.getForm().isValid()`.</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>### 内容代码Js操作</div><div>#### 曾经的坑.</div><div>1. 地址和联系电话字段名不同. 在选择a)劳务队伍;b)机械供应商;3)材料供应商时返回相应的 地址,联系电话与合同中不完全对应.&nbsp; 为了方便设值:</div><div>&nbsp;&nbsp;&nbsp; 1. 选择abc 内容的时候和界面保持一致,容易赋值, 且和Modelfield对应</div><div>&nbsp;&nbsp;&nbsp; 2. 加载合同和保存合同的时候,特殊处理下.</div><div>2. combobox加载值的特殊处理.</div><div>&nbsp;&nbsp;&nbsp; 1. 描述:</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1. 加载值后,value和rawvalue(显示值)不一样, 如果不处理, 显示实际值. 不符合要求.</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.&nbsp; 如果单纯设置RawValue, 则提交时出问题.</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.&nbsp; 值的类型: 类似于0对应false,1对应true一样. 如果不重新选择, getValues()获得原始值,getRawValues获得显示实际值. 所以combobox类型下拉框类型控件要特殊处理.</div><div>&nbsp;&nbsp;&nbsp; 2. 解决办法.</div><div>&gt;</div><div>&nbsp;</div><div>&nbsp;&nbsp;&nbsp; 1. 选择出控件集内下拉框类型:&nbsp; &lt;/br&gt;</div><div>&nbsp;&nbsp;&nbsp; var combs = App.ValueAddedTaxPanel.queryBy(function (item)&lt;/br&gt; {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return item.getXType() == 'combobox'; &lt;/br&gt;</div><div>&nbsp;&nbsp;&nbsp; })&lt;/br&gt;</div><div>&nbsp;&nbsp;&nbsp; 2. 赋值方法. &lt;/br&gt;</div><div>&nbsp;&nbsp;&nbsp; var initComboxByValue = function (comb) {</div><div>&nbsp;&nbsp;&nbsp; var value = comb.getValue();</div><div>&nbsp;&nbsp;&nbsp; var record = comb.findRecordByValue(value);</div><div>&nbsp;&nbsp;&nbsp; if (record) {</div><div>&nbsp;&nbsp;&nbsp; comb.setSelectedItems(record);</div><div>&nbsp;&nbsp;&nbsp; } else {</div><div>&nbsp;&nbsp;&nbsp; comb.setValue('');</div><div>&nbsp;&nbsp;&nbsp; }</div><div>&nbsp;&nbsp;&nbsp; } &lt;/br&gt;</div><div>&nbsp;&nbsp;&nbsp; 3. 遍历 &lt;br&gt;</div><div>&nbsp;&nbsp;&nbsp; Ext.Array.each(combs, function (item) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; initComboxByValue(item);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>#### 正常使用</div><div>- 1.给它们赋值</div><div>&gt;</div><div>```</div><div>//增值税信息初始化 &lt;/br&gt;</div><div>`App.ValueAddedTaxPanel.form.setValues(selectedNodes[0].data);`</div><div>`App.ValueAddedTaxPanel.form.setValues({ TaxAddress: selectedNodes[0].data.Address, TaxContractPhone: selectedNodes[0].data.ContactNumber });`</div><div> ```</div><div>&nbsp;</div><div>- 2.获取值.`App.ValueAddedTaxPanel.form.getValues();` 获得key-value字符串形式.</div><div>- 3.它们内相应验证通过,必填项等.`App.ValueAddedTaxPanel.getForm().isValid()`</div><!--WizHtmlContentEnd--></body></html>