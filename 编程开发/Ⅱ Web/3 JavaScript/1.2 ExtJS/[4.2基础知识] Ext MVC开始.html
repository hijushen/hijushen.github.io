<!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!--defaultCSS-->
<title>[4.2基础知识] Ext MVC开始</title>



<style type="text/css" id="wiz_custom_css">
body
{
    font-family: 微软雅黑,"Microsoft YaHei", Georgia,Helvetica,Arial,sans-serif,宋体, PMingLiU,serif;
    font-size: 10.5pt;
    line-height: 1.5;
}
html, body
{
    
    
}
h1 {
    font-size:1.5em;
    font-weight:bold;
}
h2 {
    font-size:1.4em;
    font-weight:bold;
}
h3 {
    font-size:1.3em;
    font-weight:bold;
}
h4 {
    font-size:1.2em;
    font-weight:bold;
}
h5 {
    font-size:1.1em;
    font-weight:bold;
}
h6 {
    font-size:1.0em;
    font-weight:bold;
}
img {
    border:0;
    max-width: 100%;
    height: auto !important;
}
blockquote {
    margin-top:0px;
    margin-bottom:0px;
}
table {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
td {
    border-collapse:collapse;
    border:1px solid #bbbbbb;
}
</style>

<style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style><link type="text/css" rel="stylesheet" id="wiz_code_highlight_link" href="[4.2基础知识] Ext MVC开始_files/wiz_code_highlight_17.css"></head>

<body  style="">1. 完成页面中的引用顺序:<div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-html"><span class="tag">&lt;html&gt;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-html"><span class="tag">&lt;head&gt;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-html"><span class="pln">    </span><span class="tag">&lt;meta</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"viewport"</span><span class="pln"> </span><span class="atn">content</span><span class="pun">=</span><span class="atv">"width=device-width"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-html"><span class="pln">    </span><span class="tag">&lt;link</span><span class="pln"> </span><span class="atn">href</span><span class="pun">=</span><span class="atv">"~/ext/resources/css/ext-all.css"</span><span class="pln"> </span><span class="atn">rel</span><span class="pun">=</span><span class="atv">"stylesheet"</span><span class="pln"> </span><span class="tag">/&gt; //1. 引入CSS</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-html"><span class="pln">    </span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"~/ext/ext-all-debug.js"</span><span class="tag">&gt;&lt;/script&gt; //2.引入开发</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-html"><span class="pln">    </span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"~/ext/locale/ext-lang-zh_CN.js"</span><span class="tag">&gt;&lt;/script&gt; //3.引入中文包</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-html"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-html"><span class="pln">    </span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"~/app.js"</span><span class="tag">&gt;&lt;/script&gt; //MVC的入口</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-html"><span class="pln">    </span><span class="tag">&lt;title&gt;</span><span class="pln">Index</span><span class="tag">&lt;/title&gt;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-html"><span class="tag">&lt;/head&gt;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-html"><span class="tag">&lt;body&gt;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-html"><span class="pln">    </span><span class="tag">&lt;div&gt;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-html"><span class="pln">        </span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-html"><span class="pln">    </span><span class="tag">&lt;/div&gt;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-html"><span class="tag">&lt;/body&gt;</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-html"><span class="tag">&lt;/html&gt;</span></code></li></ol></pre></div><div>2. MVC的入口 app.js. &nbsp;&nbsp;</div></div><div>为什么吗是userlist??&nbsp;</div><div>--1. 定义了controller入口为Users. 然后视图为userlist.</div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="typ">Ext</span><span class="pun">.</span><span class="pln">application</span><span class="pun">({</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">    name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'AM'</span><span class="pun">,</span><span class="pln"> </span><span class="com">//1.定义命名空间</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">    appFolder</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app'</span><span class="pun">,</span><span class="pln"> </span><span class="com">//2.应用到的物理路径文件夹</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pln">    controllers</span><span class="pun">:[</span><span class="pln"> </span><span class="com">//3.设置controller</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">        </span><span class="str">'Users'</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">    </span><span class="pun">],</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">    launch</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">        </span><span class="typ">Ext</span><span class="pun">.</span><span class="pln">create</span><span class="pun">(</span><span class="str">"Ext.container.Viewport"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pln">            layout</span><span class="pun">:</span><span class="pln"> </span><span class="str">'fit'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"><span class="pln">            items</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pln">                xtype</span><span class="pun">:</span><span class="str">'userlist'</span><span class="pln"> </span><span class="com">//4.定义的userlist View视图</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">            </span><span class="pun">}]</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">        </span><span class="pun">});</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pln">    </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pun">})</span></code></li></ol></pre></div><div>MVC的文档结构图:</div></div><div><img src="[4.2基础知识] Ext MVC开始_files/76c9a57e-0e67-4dce-8932-3bb549d72258.png" border="0" alt=""><br></div><div><br></div><div>3.&nbsp;</div><div>&nbsp;-- controller的代码:<span style="font-size: 10.5pt; line-height: 1.5;">&nbsp;&nbsp;</span></div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="typ">Ext</span><span class="pun">.</span><span class="pln">define</span><span class="pun">(</span><span class="str">'AM.controller.Users'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">    extend</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Ext.app.Controller'</span><span class="pun">, //1.Controller的继承方式</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">    stores</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'Users'</span><span class="pun">], //2.定义了store</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pln">    models</span><span class="pun">:[</span><span class="str">'User'</span><span class="pun">], //3.定义了model</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">    views</span><span class="pun">:[ //4.定义了views</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">        </span><span class="str">'user.List'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">        </span><span class="str">'user.Edit'</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">    </span><span class="pun">],</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pln">    init</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{ //5.初始化事件</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">control</span><span class="pun">({</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pln">            </span><span class="com">//'viewport &gt; panel': {//Viewport下panel</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">            </span><span class="com">//    render: this.onPanelRendered</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">            </span><span class="com">//}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pln">            </span><span class="str">'userlist'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{ </span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">                itemdblclick</span><span class="pun">:</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">editUser //6.userlist视图下itemdblclick事件</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">            </span><span class="pun">},</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">            </span><span class="str">'useredit button[action=save]'</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{ //7.useredit视图下属性选择器action=save. </span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">                click</span><span class="pun">:</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">updateUser</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pln">            </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"><span class="pln">        </span><span class="pun">});</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pln">        </span><span class="com">//console.log("Initialized Users! This happens before the Application launch function is called");</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">    </span><span class="pun">},</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">    editUser</span><span class="pun">:</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">grid</span><span class="pun">,</span><span class="pln">record</span><span class="pun">){ //8.实现步骤6中editUser方法</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pln">        </span><span class="com">//console.log('Double clicked on '+record.get('name'));</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> view </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Ext</span><span class="pun">.</span><span class="pln">widget</span><span class="pun">(</span><span class="str">'useredit'</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">        view</span><span class="pun">.</span><span class="pln">down</span><span class="pun">(</span><span class="str">'form'</span><span class="pun">).</span><span class="pln">loadRecord</span><span class="pun">(</span><span class="pln">record</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">    </span><span class="pun">},</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">    updateUser</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">button</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{ //9.实现步骤7中需要定义的方法</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pln">        console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'clicked the Save button'</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> win </span><span class="pun">=</span><span class="pln"> button</span><span class="pun">.</span><span class="pln">up</span><span class="pun">(</span><span class="str">'window'</span><span class="pun">),</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pln">            form </span><span class="pun">=</span><span class="pln"> win</span><span class="pun">.</span><span class="pln">down</span><span class="pun">(</span><span class="str">'form'</span><span class="pun">),</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">            record </span><span class="pun">=</span><span class="pln"> form</span><span class="pun">.</span><span class="pln">getRecord</span><span class="pun">(),</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">            values </span><span class="pun">=</span><span class="pln"> form</span><span class="pun">.</span><span class="pln">getValues</span><span class="pun">();</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">        record</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="pln">values</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">        win</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">    </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">    </span><span class="com">//onPanelRendered: function () {</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pln">    </span><span class="com">//    console.log("This panel was rendered");</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"><span class="pln">    </span><span class="com">//}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pun">});</span></code></li></ol></pre></div><div>4. --定义model的代码</div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="typ">Ext</span><span class="pun">.</span><span class="pln">define</span><span class="pun">(</span><span class="str">'AM.model.User'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">    extend</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Ext.data.Model'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">    fields</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">'name'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'email'</span><span class="pun">]</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pun">});</span></code></li></ol></pre></div><div>5. 设置store的代码</div></div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="typ">Ext</span><span class="pun">.</span><span class="pln">define</span><span class="pun">(</span><span class="str">'AM.store.Users'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">    extend</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Ext.data.Store'</span><span class="pun">, </span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">    </span><span class="com">//fields: ['name', 'email'],</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pln">    model</span><span class="pun">:</span><span class="str">'AM.model.User'</span><span class="pun">,//使用model模式,不需要自己定义fields.</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">    data</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">        </span><span class="pun">{</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Ed'</span><span class="pun">,</span><span class="pln"> email</span><span class="pun">:</span><span class="pln"> </span><span class="str">'ed@sencha.com'</span><span class="pln"> </span><span class="pun">},</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">        </span><span class="pun">{</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Tommy'</span><span class="pun">,</span><span class="pln"> email</span><span class="pun">:</span><span class="pln"> </span><span class="str">'tommy@sencha.com'</span><span class="pln"> </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">    </span><span class="pun">]</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pun">});</span></code></li></ol></pre></div><div>7. view/user/List === xtype: userlist期待很久的用户展示界面(初始时即显示)</div></div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="typ">Ext</span><span class="pun">.</span><span class="pln">define</span><span class="pun">(</span><span class="str">'AM.view.user.List'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">    extend</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Ext.grid.Panel'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">    alias</span><span class="pun">:</span><span class="pln"> </span><span class="str">'widget.userlist'</span><span class="pun">,</span><span class="pln"> </span><span class="com">//别名,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pln">    title</span><span class="pun">:</span><span class="pln"> </span><span class="str">'All Users'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">    store</span><span class="pun">:</span><span class="str">'Users'</span><span class="pun">,//使用了已定义store就不用在初始化中生命静态数据fields和data了.</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">    initComponent</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">        </span><span class="com">//this.store = {</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">        </span><span class="com">//    fields: ['name', 'email'],</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pln">        </span><span class="com">//    data: [</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"><span class="pln">        </span><span class="com">//        { name: 'ED', email: 'ed@sencha.com' },</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pln">        </span><span class="com">//        { name: 'Tommy', email: 'tommy@sencha.com' }</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">        </span><span class="com">//    ]</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">        </span><span class="com">//};</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">columns </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[ //1. 定义了类, dataIndwx代表实际数据. flex表示另一列不显示时,独自占用全部</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">            </span><span class="pun">{</span><span class="pln"> header</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Name'</span><span class="pun">,</span><span class="pln"> dataIndex</span><span class="pun">:</span><span class="pln"> </span><span class="str">'name'</span><span class="pun">,</span><span class="pln"> flex</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">},</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">            </span><span class="pun">{</span><span class="pln"> header</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Email'</span><span class="pun">,</span><span class="pln"> dataIndex</span><span class="pun">:</span><span class="pln"> </span><span class="str">'email'</span><span class="pun">,</span><span class="pln"> flex</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">        </span><span class="pun">];</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">callParent</span><span class="pun">(</span><span class="pln">arguments</span><span class="pun">); //2. 调用父pannel方法</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pln">    </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pun">})</span></code></li></ol></pre></div><div>8.view/user/Edit === xtype:useredit. 声明了双击修改弹出修改框.</div></div><div><div><pre class="prettyprint linenums prettyprinted"><ol class="linenums" style="padding-left: 0px;"><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="typ">Ext</span><span class="pun">.</span><span class="pln">define</span><span class="pun">(</span><span class="str">'AM.view.user.Edit'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">    extend</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Ext.window.Window'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">    alias</span><span class="pun">:</span><span class="pln"> </span><span class="str">'widget.useredit'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">    title</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Edit User'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">    layout</span><span class="pun">:</span><span class="pln"> </span><span class="str">'fit'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">    autoShow</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pln">    initComponent</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">items </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pln">            </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">                xtype</span><span class="pun">:</span><span class="pln"> </span><span class="str">'form'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">                items</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pln">                    </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">                        xtype</span><span class="pun">:</span><span class="pln"> </span><span class="str">'textfield'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">                        name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'name'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">                        fieldLabel</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Name'</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">                    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pln">                        xtype</span><span class="pun">:</span><span class="pln"> </span><span class="str">'textfield'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"><span class="pln">                        name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'email'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pln">                        fieldLabel</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Email'</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">                    </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">                </span><span class="pun">]</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pln">            </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">        </span><span class="pun">];//注意是; 上面定义2行, Name和Email 的textfield</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">buttons </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"><span class="pln">            </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">                text</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Save'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pln">                action</span><span class="pun">:</span><span class="pln"> </span><span class="str">'save' //???</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"><span class="pln">            </span><span class="pun">},</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pln">            </span><span class="pun">{</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L1"><code class="language-js"><span class="pln">                text</span><span class="pun">:</span><span class="pln"> </span><span class="str">'Cancel'</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L2"><code class="language-js"><span class="pln">                scope</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">,</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L3"><code class="language-js"><span class="pln">                handler</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">close</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L4"><code class="language-js"><span class="pln">            </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L5"><code class="language-js"><span class="pln">        </span><span class="pun">];</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L6"><code class="language-js"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L7"><code class="language-js"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">callParent</span><span class="pun">(</span><span class="pln">arguments</span><span class="pun">);</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L8"><code class="language-js"><span class="pln">    </span><span class="pun">}</span></code></li><li style="list-style-type: none; padding-left: 0px;" class="L9"><code class="language-js"></code></li><li style="list-style-type: none; padding-left: 0px;" class="L0"><code class="language-js"><span class="pun">})</span></code></li></ol></pre></div><div><br></div></div><div><br></div></body></html>