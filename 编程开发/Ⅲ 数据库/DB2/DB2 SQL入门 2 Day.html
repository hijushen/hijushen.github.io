<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>DB2 SQL入门 2 Day</title><?xml version="1.0" encoding="UTF-8"?>


<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">
使用STAFF和ORG表来创建一个列出每个部门名称和部门经理姓名的视图：
<div>CREATE VIEW DEPARTMENT_MGRS</div><div>&nbsp; &nbsp; &nbsp;AS SELECT NAME,DEPTNAME</div><div>&nbsp; &nbsp; &nbsp;FROM STAFF,ORG</div><div>&nbsp; &nbsp; &nbsp;WHERE MANAGER = ID;</div><div>可以添加with,check,option 字句，将附加约束添加到通过视图对表进行的插入和更新。</div><div><br/></div><div>4 使用SQL语句存取数据</div><div>&nbsp; &nbsp; &nbsp;连接sample 数据库，在DB2 命令行下输入：</div><div>&nbsp; &nbsp; &nbsp;CONNECT To SAMPLE USER USERID USING USINGPASSWORD</div><div>&nbsp; &nbsp; &nbsp;?+信息标识符，或 &nbsp; &nbsp;+ SQLSTATE 来获取关于错误信息的详情。</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 注意：字符和字符串需要使用‘’来束缚，但是数字却不需要加；</div><div>&nbsp; &nbsp; &nbsp;ORDER BY &nbsp;子句中列名不必在选择列表中指定。</div><div>排序关键词：ASC(升序)，DESC(降序)，DISTINCT(消除重复){SELECT DISTINCT}</div><div>&nbsp; &nbsp; &nbsp;</div><div>运算次序：1 FROM 子句</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 WHERE 子句</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 GROUP BY 子句</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 HAVING 子句</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5 SELECT 子句</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6 ORDER BY 子句&nbsp;</div><div><br/></div><div>使用表达式计算值：</div><div>&nbsp; &nbsp; &nbsp;如果部门38中每个雇员都收到￥500奖金，则每个人工资多少？</div><div>&nbsp; &nbsp; &nbsp;SELECT DEPT,NAME,SALARY+500</div><div>&nbsp; &nbsp; &nbsp;FROM STAFF</div><div>&nbsp; &nbsp; &nbsp;WHERE DEPT = 38</div><div>&nbsp; &nbsp; &nbsp;ORDER BY 3(3代表语句中第三个列)</div><div><br/></div><div>&nbsp; &nbsp; &nbsp;算术表达式：+ - * / ,可运算于以下内容中：</div><div>&nbsp; &nbsp; &nbsp;列名（RATE * HOURS）</div><div>&nbsp; &nbsp; &nbsp;常数值 （RATE * 1.0T）</div><div>&nbsp; &nbsp; &nbsp;标量函数（LENGTH(NAME) + 1）</div><div><br/></div><div>给表达式命名</div><div>&nbsp; &nbsp; &nbsp;SELECT NAME,JOB,SALARY+COMM AS PAY</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM STAFF</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE (SALARY + COMM) &lt; 13000 &nbsp; //为什么不用PAY?</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ORDEY BY PAY</div><div>原因是WHERE 执行于SELECT之前，如果使用PAY 系统无法识别。。</div><div>&nbsp; &nbsp; &nbsp;</div><div>在多个表中选择数据 &nbsp; &nbsp; &nbsp; 雇员信息表（STAFF表） 部门信息表（ORG表）</div><div>使用SELECT 从两个或多个表中生成包含信息的报告 &nbsp;--&gt; 连接操作！！</div><div>SELECT DEPTNAME,NAME</div><div>&nbsp; &nbsp; &nbsp;FROM ORG,STAFF</div><div>&nbsp; &nbsp; &nbsp;WHERE MANAGER = ID</div><div><br/></div><div>使用子查询：</div><div>&nbsp; &nbsp; &nbsp;编写SQL SELECT 语句时，可在WHERE 子句添置附加SELECT 语句，每一个SELECT &nbsp;启动一个子查询。</div><div>&nbsp; &nbsp; &nbsp;子查询本身又包含其结果带入原始查询的WHERE 子句另一个查询。</div><div>另外，WHERE 子句可将子查询包括在多个搜索条件中。</div><div>&nbsp; &nbsp; &nbsp;从ORG表中选择STAFF表中ID为280的雇员的分部和位置，。</div><div>&nbsp; &nbsp; &nbsp;SELECT DIVISION,LOCATION</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM ORG</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE DEPTNUMB = (SELECT DEPT FROM STAFF WHERE ID =280)</div><div><br/></div><div>使用函数 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AVG MIN COUNT MAX</div><div>&nbsp; &nbsp; &nbsp;标量函数 &nbsp; &nbsp; ABS 返回函数的绝对值 &nbsp; &nbsp; &nbsp;YEAR抽取时间值的年份部分</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HEX返回值的十六进表中 &nbsp; &nbsp; LENGTH返回变量中字节数</div><div><br/></div><div>&nbsp; &nbsp; &nbsp;表函数 &nbsp; &nbsp; &nbsp; &nbsp;返回表中的列，仅可用于SQL语句的FROM语句</div><div>&nbsp; &nbsp; <font color="#FF4635">&nbsp;DB2 仅支持SQLCACHE SNAPSHOT</font></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 作用：将DB2 动态SQL语句高速缓存瞬像结果作为表返回。</div><div>将WHERE 子句与GROUP BY 子句一起使用。</div><div><br/></div></div>