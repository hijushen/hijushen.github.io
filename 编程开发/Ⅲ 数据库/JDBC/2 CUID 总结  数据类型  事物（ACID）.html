<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>2 CUID 总结  数据类型  事物（ACID）</title><?xml version="1.0" encoding="UTF-8"?>


<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;增、删、改用Statement.executeUpdate来完成，返回整数，（匹配的记录数），这类操作简单；
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查询用Statement.executeQuery来完成，返回ResultSet对象，ResultSet包含了查询的结果，查询要复杂点，因为查询要处理。</div><div><br/></div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SQL注入的问题：SQL包含特殊字符或SQL的 关键字，Statement的结果未知，这时候需要采用PreparedStatement来处理，好处有很多：</div><div>&nbsp; &nbsp; &nbsp;1，没有SQL注入的问题；&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div>&nbsp; &nbsp; &nbsp;2，Statement会频繁让数据库编译SQL,可能会造成缓冲期溢出；</div><div>&nbsp; &nbsp; &nbsp;3，数据库和驱动可以对PreparedStatement优化，（只有在相关联的数据库连接正常的情况下有效） &nbsp;</div><div><br/></div><div>&nbsp; &nbsp; &nbsp;</div><div>&nbsp; &nbsp; &nbsp;数据类型：参见java.sql.Types</div><div><br/></div><div><br/></div><div>&nbsp; &nbsp; &nbsp;原子性（atomicity），一个整体的逻辑单元，不能只执行部分；</div><div>&nbsp; &nbsp; &nbsp;一致性（consistency） 数据库完整性约束，在事物执行前后；</div><div>&nbsp; &nbsp; &nbsp;隔离性（isolation） 一个事务对另一个事物的影响；</div><div>&nbsp; &nbsp; &nbsp;持久性（durability）事物处理的效果能被永久的保留下路。</div><div>&nbsp; &nbsp; &nbsp;connection.setAutoCommit(false); &nbsp;<a>//打开事物</a></div><div>&nbsp; &nbsp; &nbsp;connection.commit(); &nbsp;<a>//提交事物</a></div><div>&nbsp; &nbsp; &nbsp;connection.rollback(); &nbsp;<a>//事物回滚</a></div><div><br/></div><div>如果只想 改动事物中的一部分，可以采用SavePoint</div><div>&nbsp; &nbsp; &nbsp;SavePoint sp = conncetion.setSavePoint();</div><div>&nbsp; &nbsp; &nbsp;connection.rollback(sp);&nbsp;</div><div>&nbsp; &nbsp; &nbsp;connection.commit();</div><div>&nbsp; &nbsp; &nbsp;</div><div>&nbsp; &nbsp; &nbsp;跨越多个数据源的事物，使用JTA容器实现事物 &nbsp; &nbsp; 。</div><div><br/></div><div>&nbsp; &nbsp; &nbsp;</div></div>