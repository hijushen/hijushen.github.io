<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Oracle 日期类型timestamp(时间戳)和date类型使用</title><?xml version="1.0" encoding="UTF-8"?>


<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><strong style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">1、获取系统时间的语句(ssxff6获取小数点后面六位)</strong><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">&nbsp;</span><br style="text-align: left; background-color: rgb(255, 255, 255); line-height: 25.200000762939453px; font-size: 14px; font-family: Helvetica, Tahoma, Arial, sans-serif;"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">select sysdate,systimestamp,to_char(systimestamp, &#39;yyyymmdd hh24:mi:ssxff6&#39;),&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">&nbsp; to_char(systimestamp, &#39;yyyymmdd hh24:mi:ss.ff6&#39;) from dual;&nbsp;&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><strong style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">2、字符型转成timestamp&nbsp;</strong><br style="text-align: left; background-color: rgb(255, 255, 255); line-height: 25.200000762939453px; font-size: 14px; font-family: Helvetica, Tahoma, Arial, sans-serif;"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">select to_timestamp(&#39;2011-09-14 12:52:42.123456789&#39;, &#39;syyyy-mm-dd hh24:mi:ss.ff&#39;) from dual;&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><strong style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">3、timestamp转成date型</strong><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">&nbsp;</span><br style="text-align: left; background-color: rgb(255, 255, 255); line-height: 25.200000762939453px; font-size: 14px; font-family: Helvetica, Tahoma, Arial, sans-serif;"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">select cast(to_timestamp(&#39;2011-09-14 12:52:42.123456789&#39;, &#39;syyyy-mm-dd hh24:mi:ss.ff&#39;) as date) timestamp_to_date from dual;&nbsp;&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><strong style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">4、date型转成timestamp</strong><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">&nbsp;</span><br style="text-align: left; background-color: rgb(255, 255, 255); line-height: 25.200000762939453px; font-size: 14px; font-family: Helvetica, Tahoma, Arial, sans-serif;"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">select cast(sysdate as timestamp) date_to_timestamp from dual;&nbsp;&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><strong style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">5、两date的日期相减得出的是天数，而两timestamp的日期相减得出的是完整的年月日时分秒小数秒</strong><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">&nbsp;</span><br style="text-align: left; background-color: rgb(255, 255, 255); line-height: 25.200000762939453px; font-size: 14px; font-family: Helvetica, Tahoma, Arial, sans-serif;"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">select sysdate-sysdate,systimestamp-systimestamp from dual;&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">select extract(day from inter) * 24 * 60 * 60 +&nbsp;&nbsp;&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">&nbsp; extract(hour from inter) * 60 * 60 + extract(minute from inter) * 60 +&nbsp;&nbsp;&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; extract(second from inter) &quot;seconds&quot; from&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">(&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">&nbsp; select to_timestamp(&#39;2011-09-14 12:34:23.281000000&#39;, &#39;yyyy-mm-dd hh24:mi:ss.ff&#39;) -&nbsp;&nbsp;&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp; to_timestamp(&#39;2011-09-14 12:34:22.984000000&#39;, &#39;yyyy-mm-dd hh24:mi:ss.ff&#39;) inter from dual&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">);&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">select extract(second from to_timestamp(&#39;2011-09-14 12:34:23.281000000&#39;, &#39;yyyy-mm-dd hh24:mi:ss.ff&#39;))-&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">&nbsp; extract(second from to_timestamp(&#39;2011-09-14 12:34:22.984000000&#39;, &#39;yyyy-mm-dd hh24:mi:ss.ff&#39;)) from dual;&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">注：所以，timestamp要算出两日期间隔了多少秒，要用函数转换一下。&nbsp;</span><br style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);">to_char函数支持date和timestamp,但是trunc却不支持TIMESTAMP数据类型。&nbsp;</span><div style="text-align: left;"><font face="Helvetica, Tahoma, Arial, sans-serif"><span style="font-size: 14px; line-height: 25px;"><br/></span></font></div><div style="text-align: left;"><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21.1pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong>DATE<span style="line-height: 1.5; font-family: 宋体;">数据类型</span></strong></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">可以存储月，年，日，世纪，时，分和秒。度量粒度是秒</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">以使用</span>TO_CHAR<span style="line-height: 1.5; font-family: 宋体;">函数把</span>DATE<span style="line-height: 1.5; font-family: 宋体;">数据进行传统地包装，达到表示成多种格式的目的</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 黑体;">SELECT TO_CHAR(sysdate,&#39;MM/DD/YYYY HH24:MI:SS&#39;) &quot;Date&quot; FROM dual</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">大多数人陷入的麻烦就是计算两个时间间的间隔年数、月数、天数、小时数和秒数。你需要明白的是，当你进行两个日期的相减运算的时候，得到的是“带小数位的天数”。</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">可以通过一个函数将天数转换成“天时分秒”格式：</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">CREATE OR REPLACE FUNCTION F_DAYS2STR(P_DAYS IN NUMBER DEFAULT&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">)<br/>
&nbsp;&nbsp;&nbsp; RETURN VARCHAR2 IS<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--Ver:1.0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--Created by xsb on 2005-05-26</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--For:&nbsp;</span><span style="line-height: 1.5; color: green; font-family: 宋体;">将天数转换成天时分秒格式</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp; DAYS&nbsp;&nbsp; NUMBER := NVL(P_DAYS,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">);<br/>
&nbsp;&nbsp;&nbsp; VD&nbsp;&nbsp;&nbsp;&nbsp; NUMBER;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--</span><span style="line-height: 1.5; color: green; font-family: 宋体;">天</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp; VH&nbsp;&nbsp;&nbsp;&nbsp; NUMBER;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--</span><span style="line-height: 1.5; color: green; font-family: 宋体;">小时</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp; VM&nbsp;&nbsp;&nbsp;&nbsp; NUMBER;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--</span><span style="line-height: 1.5; color: green; font-family: 宋体;">分</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp; VS&nbsp;&nbsp;&nbsp;&nbsp; NUMBER;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--</span><span style="line-height: 1.5; color: green; font-family: 宋体;">秒</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp; RESULT VARCHAR2(</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">100</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">);&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--</span><span style="line-height: 1.5; color: green; font-family: 宋体;">返回值</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
BEGIN<br/>
&nbsp;&nbsp;&nbsp; VD := TRUNC(DAYS);<br/>
&nbsp;&nbsp;&nbsp; VH := TRUNC((DAYS - VD) *&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">);<br/>
&nbsp;&nbsp;&nbsp; VM := TRUNC((DAYS - VD - VH /&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">) *&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">&nbsp;*&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">60</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">);<br/>
&nbsp;&nbsp;&nbsp; VS := TRUNC((DAYS - VD - VH /&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">&nbsp;- VM /&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">&nbsp;/&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">60</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">) *&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">&nbsp;*&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">60</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">&nbsp;*&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">60</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">);<br/>
&nbsp;&nbsp;&nbsp; SELECT DECODE(VD,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">, VD ||&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: 宋体;">天</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">) || DECODE(VH,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">, VH ||&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: 宋体;">小时</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">) ||DECODE(VM,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">, VM ||&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: 宋体;">分</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">) || DECODE(VS,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">, VS ||</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: 宋体;">秒</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">)&nbsp;&nbsp; INTO RESULT FROM DUAL;<br/>
&nbsp;&nbsp;&nbsp; RETURN(RESULT);<br/>
END;<br/><br/></span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21.1pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong>TIMESTAMP&nbsp;<span style="line-height: 1.5; font-family: 宋体;">数据类型</span></strong></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">它包括了所有</span>DATE<span style="line-height: 1.5; font-family: 宋体;">数据类型的年月日时分秒的信息，而且包括了小数秒的信息。</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; text-align: start; background-color: rgb(255, 255, 255);">SELECT sysdate,systimestamp FROM dual</p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">注意，</span>to_char<span style="line-height: 1.5; font-family: 宋体;">函数支持</span>date<span style="line-height: 1.5; font-family: 宋体;">和</span>timestamp<span style="line-height: 1.5; font-family: 宋体;">，但是</span>trunc<span style="line-height: 1.5; font-family: 宋体;">却不支持</span>TIMESTAMP<span style="line-height: 1.5; font-family: 宋体;">数据类型。</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21.1pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; text-align: start; background-color: rgb(255, 255, 255);"><strong>SELECT</strong>&nbsp;<strong>sysdate</strong>,systimestamp,to_char(systimestamp,&#39;yyyymmdd hh24:mi:ssxff3&#39;)&nbsp;<strong>FROM</strong>&nbsp;dual</p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">当你直接相减的话，看看会发生什么。结果将更容易理解，</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 20.1pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><strong><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">select</span></strong><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">&nbsp;systimestamp-systimestamp&nbsp;<strong>from</strong>&nbsp;dual</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">这就意味着不用再通过麻烦的计算求出多少天多少秒，用</span>substr<span style="line-height: 1.5; font-family: 宋体;">函数摘取出其中的数字即可！</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">结论：当使用</span>date<span style="line-height: 1.5; font-family: 宋体;">和</span>timestamp<span style="line-height: 1.5; font-family: 宋体;">类型的时候，选择是很清楚的。你可以随意处置</span>date<span style="line-height: 1.5; font-family: 宋体;">和</span>timestamp<span style="line-height: 1.5; font-family: 宋体;">类型。当你的时间粒度必须精确至秒以下时，可以考虑使用</span>timestamp<span style="line-height: 1.5; font-family: 宋体;">。</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">再来看如何实现：<strong>将天数转换成“天时分秒”格式：</strong></span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">使用</span>DATE<span style="line-height: 1.5; font-family: 宋体;">数据类型：</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><strong><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">create</span></strong><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">&nbsp;<strong>table</strong>&nbsp;t2 (d1&nbsp;<strong>date</strong>,d2&nbsp;<strong>date</strong>) ;<br/><strong>INSERT</strong>&nbsp;<strong>INTO</strong>&nbsp;T2&nbsp;<strong>VALUES</strong>&nbsp;(<strong>SYSDATE</strong>,&nbsp;<strong>SYSDATE</strong>&nbsp;+&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">1.1234</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">);<br/><strong>SELECT</strong>&nbsp;D1, D2, D2 - D1, F_DAYS2STR(D2 - D1),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong>CAST</strong>(D2&nbsp;<strong>AS</strong>&nbsp;<strong>TIMESTAMP</strong>) -&nbsp;<strong>CAST</strong>(D1&nbsp;<strong>AS</strong>&nbsp;<strong>TIMESTAMP</strong>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<strong>FROM</strong>&nbsp;T2</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;"><br/><strong>SELECT</strong>&nbsp;TO_NUMBER(SUBSTR(D21,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">1</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">, INSTR(D21,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39; &#39;</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">))) D,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;SUBSTR(D21, INSTR(D21,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39; &#39;</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) +&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">1</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">2</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) H,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;SUBSTR(D21, INSTR(D21,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39; &#39;</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) +&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">4</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">2</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) M,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;SUBSTR(D21, INSTR(D21,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39; &#39;</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) +&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">7</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">2</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) S<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<strong>FROM</strong>&nbsp;(<strong>SELECT CAST</strong>(D2&nbsp;<strong>AS</strong>&nbsp;<strong>TIMESTAMP</strong>) -&nbsp;<strong>CAST</strong>(D1&nbsp;<strong>AS</strong>&nbsp;<strong>TIMESTAMP</strong>) D21<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<strong>FROM</strong>&nbsp;T2)</span><strong style="line-height: 19.5px; text-indent: 21.1pt;">DATE<span style="line-height: 1.5; font-family: 宋体;">数据类型</span></strong></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">可以存储月，年，日，世纪，时，分和秒。度量粒度是秒</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">以使用</span>TO_CHAR<span style="line-height: 1.5; font-family: 宋体;">函数把</span>DATE<span style="line-height: 1.5; font-family: 宋体;">数据进行传统地包装，达到表示成多种格式的目的</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 黑体;">SELECT TO_CHAR(sysdate,&#39;MM/DD/YYYY HH24:MI:SS&#39;) &quot;Date&quot; FROM dual</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">大多数人陷入的麻烦就是计算两个时间间的间隔年数、月数、天数、小时数和秒数。你需要明白的是，当你进行两个日期的相减运算的时候，得到的是“带小数位的天数”。</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">可以通过一个函数将天数转换成“天时分秒”格式：</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">CREATE OR REPLACE FUNCTION F_DAYS2STR(P_DAYS IN NUMBER DEFAULT&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">)<br/>
&nbsp;&nbsp;&nbsp; RETURN VARCHAR2 IS<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--Ver:1.0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--Created by xsb on 2005-05-26</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--For:&nbsp;</span><span style="line-height: 1.5; color: green; font-family: 宋体;">将天数转换成天时分秒格式</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp; DAYS&nbsp;&nbsp; NUMBER := NVL(P_DAYS,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">);<br/>
&nbsp;&nbsp;&nbsp; VD&nbsp;&nbsp;&nbsp;&nbsp; NUMBER;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--</span><span style="line-height: 1.5; color: green; font-family: 宋体;">天</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp; VH&nbsp;&nbsp;&nbsp;&nbsp; NUMBER;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--</span><span style="line-height: 1.5; color: green; font-family: 宋体;">小时</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp; VM&nbsp;&nbsp;&nbsp;&nbsp; NUMBER;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--</span><span style="line-height: 1.5; color: green; font-family: 宋体;">分</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp; VS&nbsp;&nbsp;&nbsp;&nbsp; NUMBER;&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--</span><span style="line-height: 1.5; color: green; font-family: 宋体;">秒</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
&nbsp;&nbsp;&nbsp; RESULT VARCHAR2(</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">100</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">);&nbsp;</span><span style="line-height: 1.5; color: green; font-family: &#39;Courier New&#39;;">--</span><span style="line-height: 1.5; color: green; font-family: 宋体;">返回值</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;"><br/>
BEGIN<br/>
&nbsp;&nbsp;&nbsp; VD := TRUNC(DAYS);<br/>
&nbsp;&nbsp;&nbsp; VH := TRUNC((DAYS - VD) *&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">);<br/>
&nbsp;&nbsp;&nbsp; VM := TRUNC((DAYS - VD - VH /&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">) *&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">&nbsp;*&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">60</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">);<br/>
&nbsp;&nbsp;&nbsp; VS := TRUNC((DAYS - VD - VH /&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">&nbsp;- VM /&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">&nbsp;/&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">60</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">) *&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">24</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">&nbsp;*&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">60</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">&nbsp;*&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">60</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">);<br/>
&nbsp;&nbsp;&nbsp; SELECT DECODE(VD,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">, VD ||&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: 宋体;">天</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">) || DECODE(VH,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">, VH ||&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: 宋体;">小时</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">) ||DECODE(VM,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">, VM ||&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: 宋体;">分</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">) || DECODE(VS,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">0</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">, VS ||</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: 宋体;">秒</span><span style="line-height: 1.5; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39;</span><span style="line-height: 1.5; font-family: &#39;Courier New&#39;;">)&nbsp;&nbsp; INTO RESULT FROM DUAL;<br/>
&nbsp;&nbsp;&nbsp; RETURN(RESULT);<br/>
END;<br/><br/></span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21.1pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong>TIMESTAMP&nbsp;<span style="line-height: 1.5; font-family: 宋体;">数据类型</span></strong></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">它包括了所有</span>DATE<span style="line-height: 1.5; font-family: 宋体;">数据类型的年月日时分秒的信息，而且包括了小数秒的信息。</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; text-align: start; background-color: rgb(255, 255, 255);">SELECT sysdate,systimestamp FROM dual</p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">注意，</span>to_char<span style="line-height: 1.5; font-family: 宋体;">函数支持</span>date<span style="line-height: 1.5; font-family: 宋体;">和</span>timestamp<span style="line-height: 1.5; font-family: 宋体;">，但是</span>trunc<span style="line-height: 1.5; font-family: 宋体;">却不支持</span>TIMESTAMP<span style="line-height: 1.5; font-family: 宋体;">数据类型。</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21.1pt; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; text-align: start; background-color: rgb(255, 255, 255);"><strong>SELECT</strong>&nbsp;<strong>sysdate</strong>,systimestamp,to_char(systimestamp,&#39;yyyymmdd hh24:mi:ssxff3&#39;)&nbsp;<strong>FROM</strong>&nbsp;dual</p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">当你直接相减的话，看看会发生什么。结果将更容易理解，</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 20.1pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><strong><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">select</span></strong><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">&nbsp;systimestamp-systimestamp&nbsp;<strong>from</strong>&nbsp;dual</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">这就意味着不用再通过麻烦的计算求出多少天多少秒，用</span>substr<span style="line-height: 1.5; font-family: 宋体;">函数摘取出其中的数字即可！</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">结论：当使用</span>date<span style="line-height: 1.5; font-family: 宋体;">和</span>timestamp<span style="line-height: 1.5; font-family: 宋体;">类型的时候，选择是很清楚的。你可以随意处置</span>date<span style="line-height: 1.5; font-family: 宋体;">和</span>timestamp<span style="line-height: 1.5; font-family: 宋体;">类型。当你的时间粒度必须精确至秒以下时，可以考虑使用</span>timestamp<span style="line-height: 1.5; font-family: 宋体;">。</span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">再来看如何实现：<strong>将天数转换成“天时分秒”格式：</strong></span></p><p style="font-size: 13px; line-height: 19.5px; margin: 10px auto; text-indent: 21pt; text-align: start; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-family: 宋体;">使用</span>DATE<span style="line-height: 1.5; font-family: 宋体;">数据类型：</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><strong><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">create</span></strong><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">&nbsp;<strong>table</strong>&nbsp;t2 (d1&nbsp;<strong>date</strong>,d2&nbsp;<strong>date</strong>) ;<br/><strong>INSERT</strong>&nbsp;<strong>INTO</strong>&nbsp;T2&nbsp;<strong>VALUES</strong>&nbsp;(<strong>SYSDATE</strong>,&nbsp;<strong>SYSDATE</strong>&nbsp;+&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">1.1234</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">);<br/><strong>SELECT</strong>&nbsp;D1, D2, D2 - D1, F_DAYS2STR(D2 - D1),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong>CAST</strong>(D2&nbsp;<strong>AS</strong>&nbsp;<strong>TIMESTAMP</strong>) -&nbsp;<strong>CAST</strong>(D1&nbsp;<strong>AS</strong>&nbsp;<strong>TIMESTAMP</strong>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<strong>FROM</strong>&nbsp;T2</span></p><p align="left" style="font-size: 13px; line-height: 19.5px; margin: 10px auto; background-color: rgb(255, 255, 255); font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;"><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;"><br/><strong>SELECT</strong>&nbsp;TO_NUMBER(SUBSTR(D21,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">1</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">, INSTR(D21,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39; &#39;</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">))) D,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;SUBSTR(D21, INSTR(D21,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39; &#39;</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) +&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">1</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">2</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) H,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;SUBSTR(D21, INSTR(D21,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39; &#39;</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) +&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">4</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">2</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) M,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;SUBSTR(D21, INSTR(D21,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">&#39; &#39;</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) +&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">7</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">,&nbsp;</span><span style="line-height: 1.5; font-size: 10pt; color: rgb(0, 0, 240); font-family: &#39;Courier New&#39;;">2</span><span style="line-height: 1.5; font-size: 10pt; font-family: &#39;Courier New&#39;;">) S<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<strong>FROM</strong>&nbsp;(<strong>SELECT CAST</strong>(D2&nbsp;<strong>AS</strong>&nbsp;<strong>TIMESTAMP</strong>) -&nbsp;<strong>CAST</strong>(D1&nbsp;<strong>AS</strong>&nbsp;<strong>TIMESTAMP</strong>) D21<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<strong>FROM</strong>&nbsp;T2)</span></p></div><div><span style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.200000762939453px; text-align: left; background-color: rgb(255, 255, 255);"><br/></span></div></div>